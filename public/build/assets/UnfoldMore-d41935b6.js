import{r as m,bJ as et,bl as gt,$ as J,bm as Dt,j as r,c as D,A as be,bR as rn,k as ce,g as V,bp as on,f as W,bs as Ge,bP as ln,bO as Pt,m as I,bS as Se,bT as cn,bU as pt,bV as vt,R as fe,h as un,a1 as Re,a6 as ze,aT as Et,aU as Tt,a4 as ae,bW as dn,bX as fn,bY as tt,bZ as Z,b_ as He,b$ as Be,c0 as ge,c1 as pe,c2 as De,c3 as Pe,c4 as Mt,d as ye,c5 as $e,i as Oe,c6 as ie,c7 as mn,c8 as hn,c9 as gn,ca as pn,cb as vn,cc as xn,cd as bn,u as Nt,aP as yn,bH as Rt,ce as wn,ah as jn,ai as kn,T as $,l as nt,Q as st,B as ee,D as Ae,o as at,s as rt,a8 as we,cf as Ee,W as Cn,cg as In,a0 as zt,bG as Sn,ay as Dn,b7 as Pn,aO as $t,ch as En,a2 as Ot,a7 as re,ci as Tn,y as le,q as At,t as Y,cj as Mn,am as Ft,I as Fe,a as Lt,b as Le,S as Nn,x as ot,V as Rn,Z as zn,ck as $n,aN as On,cl as An,cm as Fn,ax as lt,K as it,cn as Ln,p as Vn,n as Hn,F as Bn,e as Un,Y as Vt,co as Kn,bw as Xe,cp as _n,a_ as Wn}from"./main-94102828.js";import{E as Yn,C as qn}from"./Edit-8cd2b20c.js";const ct=m.createContext(null);function Gn(e=!1){m.useEffect(()=>(e?document.documentElement.classList.remove("no-page-overflow"):document.documentElement.classList.add("no-page-overflow"),()=>{document.documentElement.classList.remove("no-page-overflow")}),[e])}function dr({children:e,leftSidenavStatus:n,onLeftSidenavChange:t,rightSidenavStatus:s,initialRightSidenavStatus:a,onRightSidenavChange:o,name:l,leftSidenavCanBeCompact:i,height:c="h-screen",className:d,gridClassName:u="dashboard-grid",blockBodyOverflow:g=!0,...f}){Gn(!g);const h=et("(max-width: 1024px)"),b=m.useMemo(()=>l?gt(`${l}.sidenav.compact`):!1,[l])?"compact":"open",[y,p]=J(n,h?"closed":b,t),w=m.useMemo(()=>{if(h)return"closed";if(a!=null)return a;const x=gt(`${l}.sidenav.right.position`,"open");return x??(a||"closed")},[h,l,a]),[j,S]=J(s,w,o),T=m.useCallback(x=>{S(x),Dt(`${l}.sidenav.right.position`,x)},[S,l]),M=h&&(y==="open"||j==="open");return r.jsx(ct.Provider,{value:{leftSidenavStatus:y,setLeftSidenavStatus:p,rightSidenavStatus:j,setRightSidenavStatus:T,leftSidenavCanBeCompact:i,name:l,isMobileMode:h},children:r.jsxs("div",{...f,className:D("relative isolate",u,d,c),children:[e,r.jsx(be,{children:M&&r.jsx(rn,{position:"fixed",onClick:()=>{p("closed"),T("closed")}},"dashboard-underlay")})]})})}function fr({children:e,isScrollable:n=!0}){return m.cloneElement(e,{className:D(e.props.className,n&&"overflow-y-auto stable-scrollbar","dashboard-grid-content")})}function mr({className:e,position:n,children:t,size:s="md",mode:a,overlayPosition:o="fixed",display:l="flex",overflow:i="overflow-hidden",forceClosed:c=!1}){const{isMobileMode:d,leftSidenavStatus:u,setLeftSidenavStatus:g,rightSidenavStatus:f,setRightSidenavStatus:h}=m.useContext(ct),v=n==="left"?u:f,b=d||a==="overlay",y={open:{display:l,width:null},compact:{display:l,width:null},closed:{width:0,transitionEnd:{display:"none"}}},p=Xn(v==="compact"?"compact":s);return r.jsx(ce.div,{variants:y,initial:!1,animate:c?"closed":v,transition:{type:"tween",duration:.15},onClick:w=>{const j=w.target;d&&(j.closest("button")||j.closest("a"))&&(g("closed"),h("closed"))},className:D(e,n==="left"?"dashboard-grid-sidenav-left":"dashboard-grid-sidenav-right","will-change-[width]",i,p,b&&`${o} bottom-0 top-0 z-20 shadow-2xl`,b&&n==="left"&&"left-0",b&&n==="right"&&"right-0"),children:m.cloneElement(t,{className:D(t.props.className,"w-full h-full",v==="compact"&&"compact-scrollbar"),isCompactMode:v==="compact"})})}function Xn(e){switch(e){case"compact":return"w-80";case"sm":return"w-224";case"md":return"w-240";case"lg":return"w-288";default:return e||""}}const Qn=V(r.jsx("path",{d:"M3 18h13v-2H3v2zm0-5h10v-2H3v2zm0-7v2h13V6H3zm18 9.59L17.42 12 21 8.41 19.59 7l-5 5 5 5L21 15.59z"}),"MenuOpenOutlined");function hr({children:e,className:n,hideToggleButton:t,...s}){const{isMobileMode:a,leftSidenavStatus:o,setLeftSidenavStatus:l,name:i,leftSidenavCanBeCompact:c}=m.useContext(ct),d=c&&!a,u=!t&&(a||c),g=()=>{l(o==="open"?"closed":"open")},f=()=>{const h=o==="compact"?"open":"compact";Dt(`${i}.sidenav.compact`,h==="compact"),l(h)};return r.jsx(on,{className:D("dashboard-grid-navbar",n),border:"border-b",size:"sm",color:"primary",darkModeColor:"bg-alt",toggleButton:u?r.jsx(W,{size:"md",onClick:()=>{d?f():g()},children:r.jsx(Qn,{})}):void 0,...s,children:e})}var H=(e=>(e.Select="select",e.DateRangePicker="dateRangePicker",e.SelectModel="selectModel",e.Input="input",e.BooleanToggle="booleanToggle",e.ChipField="chipField",e.Custom="custom",e))(H||{}),ve=(e=>(e.eq="=",e.ne="!=",e.gt=">",e.gte=">=",e.lt="<",e.lte="<=",e.has="has",e.hasAll="hasAll",e.doesntHave="doesntHave",e.between="between",e))(ve||{});function Ht(e){return e.set({hour:0,minute:0,second:0,millisecond:0})}function K(e){return e.set({hour:24-1,minute:60-1,second:60-1,millisecond:1e3-1})}function Zn(){var t;const e=Ge().settings.dates.default_timezone,n=((t=Ge().user)==null?void 0:t.timezone)||e||"auto";return!n||n==="auto"?ln():n}const A=Ht(Pt(Zn()));var St;const Ue=((St=Ge().i18n)==null?void 0:St.language)||"en",ut=[{key:0,label:I("Today"),getRangeValue:()=>({preset:0,start:A,end:K(A)})},{key:1,label:I("Yesterday"),getRangeValue:()=>({preset:1,start:A.subtract({days:1}),end:K(A).subtract({days:1})})},{key:2,label:I("This week"),getRangeValue:()=>({preset:2,start:Se(A,Ue),end:cn(K(A),Ue)})},{key:3,label:I("Last week"),getRangeValue:()=>{const e=Se(A,Ue).subtract({days:7});return{preset:3,start:e,end:e.add({days:6})}}},{key:4,label:I("Last 7 days"),getRangeValue:()=>({preset:4,start:A.subtract({days:7}),end:K(A)})},{key:5,label:I("Last 14 days"),getRangeValue:()=>({preset:5,start:A.subtract({days:14}),end:K(A)})},{key:6,label:I("Last 30 days"),getRangeValue:()=>({preset:6,start:A.subtract({days:30}),end:K(A)})},{key:7,label:I("Last 3 months"),getRangeValue:()=>({preset:7,start:A.subtract({months:3}),end:K(A)})},{key:8,label:I("Last 12 months"),getRangeValue:()=>({preset:8,start:A.subtract({months:12}),end:K(A)})},{key:9,label:I("This year"),getRangeValue:()=>({preset:9,start:pt(A),end:vt(K(A))})},{key:10,label:I("Last year"),getRangeValue:()=>({preset:10,start:pt(A).subtract({years:1}),end:vt(K(A)).subtract({years:1})})}],Bt=V(r.jsx("path",{d:"M7 11h2v2H7v-2zm14-5v14c0 1.1-.9 2-2 2H5c-1.11 0-2-.9-2-2l.01-14c0-1.1.88-2 1.99-2h1V2h2v2h8V2h2v2h1c1.1 0 2 .9 2 2zM5 8h14V6H5v2zm14 12V10H5v10h14zm-4-7h2v-2h-2v2zm-4 0h2v-2h-2v2z"}),"DateRangeOutlined"),Ut=fe.forwardRef((e,n)=>{const{children:t,inputProps:s,wrapperProps:a,className:o,autoFocus:l,style:i,onClick:c}=e;return r.jsx("div",{...a,onClick:c,children:r.jsx("div",{...s,role:"group",className:D(o,"flex items-center focus-within:ring focus-within:ring-primary/focus focus-within:border-primary/60"),ref:n,style:i,children:r.jsx(un,{autoFocus:l,children:t})})})}),dt=fe.forwardRef(({inputRef:e,wrapperProps:n,children:t,onBlur:s,...a},o)=>{const l=Re(a),i=ze(o),{fieldProps:c,inputProps:d}=Et({...a,focusRef:i,labelElementType:"span"});return l.wrapper=D(l.wrapper,a.disabled&&"pointer-events-none"),r.jsx(Tt,{wrapperProps:ae(n,{onBlur:u=>{i.current.contains(u.relatedTarget)||s==null||s(u)},onClick:()=>{dn(i).focusFirst()}}),fieldClassNames:l,ref:i,...c,children:r.jsx(Ut,{inputProps:d,className:D(l.input,"gap-10"),ref:e,children:t})})});function Jn(e){return e instanceof fn?"day":"minute"}function Qe(e,n,t){return n!=null&&e.compare(n)<0||t!=null&&e.compare(t)>0}function Kt(e,n){const t=tt(),[s,a]=m.useState(!1),o=n.closeDialogOnSelection??!0,l=n.granularity||Jn(e),i=n.min?Z(n.min,t):void 0,c=n.max?Z(n.max,t):void 0;return{timezone:t,granularity:l,min:i,max:c,calendarIsOpen:s,setCalendarIsOpen:a,closeDialogOnSelection:o}}function ft(){const e=tt();return m.useMemo(()=>Pt(e),[e])}function es(e){var X,P;const n=ft(),[t,s]=m.useState({start:(!e.value||!e.value.start)&&!((X=e.defaultValue)!=null&&X.start),end:(!e.value||!e.value.end)&&!((P=e.defaultValue)!=null&&P.end)}),a=e.onChange,[o,l]=J(e.value?_e(e.value,n):void 0,e.value?void 0:_e(e.defaultValue,n),e.onChange),{min:i,max:c,granularity:d,timezone:u,calendarIsOpen:g,setCalendarIsOpen:f,closeDialogOnSelection:h}=Kt(o.start,e),v=m.useCallback(()=>{s({start:!0,end:!0}),l(_e(null,n)),a==null||a(null),f(!1)},[n,l,a,f]),[b,y]=m.useState(null),[p,w]=m.useState(!1),[j,S]=m.useState(o),[T,M]=m.useState(()=>xt(o,c)),x=m.useCallback(C=>{let R=C.start,L=C.end;i&&(R=He(R,i));const B=c?Be(c,L):L;R=Be(R,B);const ke=i?He(i,R):R;return L=He(L,ke),c&&(L=Be(L,c)),{start:Z(R,u),end:Z(L,u)}},[i,c,u]),E=m.useCallback(C=>{const R={...x(C),preset:C.preset};l(R),S(R),M(xt(R,c)),s({start:!1,end:!1})},[l,x,c]),N=m.useCallback(C=>!t.start&&ge(C,j.start)||!t.end&&ge(C,j.end),[j,t]),O=m.useCallback(C=>(p||!t.start&&!t.end)&&C.compare(j.start)>=0&&C.compare(j.end)<=0,[j,t,p]),k=m.useCallback(C=>ge(C,j.start),[j]),F=m.useCallback(C=>ge(C,j.end),[j]),se=m.useCallback((C,R)=>({onPointerEnter:()=>{p&&R&&S(Ke({start:b,end:C,timezone:u}))},onClick:()=>{if(!p)w(!0),y(C),S(Ke({start:C,end:C,timezone:u}));else{const L=Ke({start:Ht(Z(b,u)),end:K(Z(C,u)),timezone:u});w(!1),y(null),E==null||E(L),h&&(f==null||f(!1))}}}),[b,p,E,f,h,u]);return{selectedValue:o,setSelectedValue:E,calendarIsOpen:g,setCalendarIsOpen:f,dayIsActive:N,dayIsHighlighted:O,dayIsRangeStart:k,dayIsRangeEnd:F,getCellProps:se,calendarDates:T,setIsPlaceholder:s,isPlaceholder:t,clear:v,setCalendarDates:M,min:i,max:c,granularity:d,timezone:u,closeDialogOnSelection:h}}function xt(e,n){let t=pe(De(e.start)),s=pe(Pe(e.end));return Mt(t,s)&&(s=Pe(s.add({months:1}))),n&&s.compare(n)>0&&(s=t,t=De(t.subtract({months:1}))),[t,s]}function Ke(e){const n=Z(e.start,e.timezone),t=Z(e.end,e.timezone);return n.compare(t)>0?{start:t,end:n}:{start:n,end:t}}function _e(e,n){return e!=null&&e.start&&(e!=null&&e.end)?e:!(e!=null&&e.start)&&(e!=null&&e.end)?(e.start=e.end.subtract({months:1}),e):!(e!=null&&e.end)&&(e!=null&&e.start)?(e.end=e.start.add({months:1}),e):{start:n,end:n.add({months:1})}}const _t=V(r.jsx("path",{d:"M16.01 11H4v2h12.01v3L20 12l-3.99-4v3z"}),"ArrowRightAltOutlined");function ts(e,n,t,s){switch(n){case"era":case"year":case"month":case"day":return e.cycle(n,t,{round:n==="year"})}if("hour"in e)switch(n){case"dayPeriod":{const a=e.hour,o=a>=12;return e.set({hour:o?a-12:a+12})}case"hour":case"minute":case"second":return e.cycle(n,t,{round:n!=="hour",hourCycle:s.hour12?12:24})}return e}function ns(e,n,t,s){switch(n){case"day":case"month":case"year":return e.set({[n]:t})}if("hour"in e)switch(n){case"dayPeriod":{const a=e.hour,o=a>=12;return t>=12===o?e:e.set({hour:o?a-12:a+12})}case"hour":if(s.hour12){const o=e.hour>=12;!o&&t===12&&(t=0),o&&t<12&&(t+=12)}case"minute":case"second":return e.set({[n]:t})}return e}const bt={year:5,month:2,day:7,hour:2,minute:15,second:15,dayPeriod:1};function ss({segment:e,domProps:n,value:t,onChange:s,isPlaceholder:a,state:{timezone:o,calendarIsOpen:l,setCalendarIsOpen:i}}){const c=ye(),d=m.useRef(""),{localeCode:u}=$e(),g=Oe(),f=ie({timeZone:o}),h=m.useMemo(()=>new mn(u,{maximumFractionDigits:0}),[u]),v=x=>{s(ns(t,e.type,x,f.resolvedOptions()))},b=x=>{s(ts(t,e.type,x,f.resolvedOptions()))},y=()=>{if(h.isValidPartialNumber(e.text)){const x=e.text.slice(0,-1),E=h.parse(x);if(x.length===0||E===0){const N=hn(o);e.type in N&&v(N[e.type])}else v(E);d.current=x}else e.type==="dayPeriod"&&b(-1)},p=x=>{var E;if(!(x.ctrlKey||x.metaKey||x.shiftKey||x.altKey)){switch(x.key){case"ArrowLeft":x.preventDefault(),x.stopPropagation(),g.focusPrevious();break;case"ArrowRight":x.preventDefault(),x.stopPropagation(),g.focusNext();break;case"Enter":(E=x.target.closest("form"))==null||E.requestSubmit(),i(!l);break;case"Tab":break;case"Backspace":case"Delete":{x.preventDefault(),x.stopPropagation(),y();break}case"ArrowUp":x.preventDefault(),d.current="",b(1);break;case"ArrowDown":x.preventDefault(),d.current="",b(-1);break;case"PageUp":x.preventDefault(),d.current="",b(bt[e.type]||1);break;case"PageDown":x.preventDefault(),d.current="",b(-(bt[e.type]||1));break;case"Home":x.preventDefault(),d.current="",v(e.maxValue);break;case"End":x.preventDefault(),d.current="",v(e.minValue);break}T(x.key)}},w=ie({hour:"numeric",hour12:!0}),j=m.useMemo(()=>{const x=new Date;return x.setHours(0),w.formatToParts(x).find(E=>E.type==="dayPeriod").value},[w]),S=m.useMemo(()=>{const x=new Date;return x.setHours(12),w.formatToParts(x).find(E=>E.type==="dayPeriod").value},[w]),T=x=>{const E=d.current+x;switch(e.type){case"dayPeriod":if(j.toLowerCase().startsWith(x))v(0);else if(S.toLowerCase().startsWith(x))v(12);else break;g.focusNext();break;case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!h.isValidPartialNumber(E))return;let N=h.parse(E),O=N,k=e.minValue===0;if(e.type==="hour"&&f.resolvedOptions().hour12){switch(f.resolvedOptions().hourCycle){case"h11":N>11&&(O=h.parse(x));break;case"h12":k=!1,N>12&&(O=h.parse(x));break}e.value>=12&&N>1&&(N+=12)}else N>e.maxValue&&(O=h.parse(x));if(Number.isNaN(N))return;const F=O!==0||k;F&&v(O),+`${N}0`>e.maxValue||E.length>=String(e.maxValue).length?(d.current="",F&&g.focusNext()):d.current=E;break}}},M=c?{}:{"aria-label":e.type,"aria-valuetext":a?void 0:`${e.value}`,"aria-valuemin":e.minValue,"aria-valuemax":e.maxValue,"aria-valuenow":a?void 0:e.value,tabIndex:0,onKeyDown:p};return r.jsx("div",{...ae(n,{...M,onFocus:x=>{d.current="",x.target.scrollIntoView({block:"nearest"})},onClick:x=>{x.preventDefault(),x.stopPropagation()}}),className:"p-2 outline-none caret-transparent cursor-default rounded focus:bg-primary focus:text-on-primary select-none whitespace-nowrap box-content tabular-nums text-center",children:e.text.padStart(e.minLength,"0")})}function as({segment:e,domProps:n}){const t=Oe();return r.jsx("div",{...n,onPointerDown:s=>{s.pointerType==="mouse"&&(s.preventDefault(),t.focusNext({from:s.target})||t.focusPrevious({from:s.target}))},"aria-hidden":!0,className:"min-w-4 cursor-default select-none",children:e.text})}function rs(e,n,t){switch(n){case"year":return{value:e.year,placeholder:"yyyy",minValue:1,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,placeholder:"mm",minValue:pn(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:gn(e),maxValue:e.calendar.getDaysInMonth(e),placeholder:"dd"}}if("hour"in e)switch(n){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12,placeholder:"--"};case"hour":if(t.hour12){const s=e.hour>=12;return{value:e.hour,minValue:s?12:0,maxValue:s?23:11,placeholder:"--"}}return{value:e.hour,minValue:0,maxValue:23,placeholder:"--"};case"minute":return{value:e.minute,minValue:0,maxValue:59,placeholder:"--"}}return{}}function xe({segmentProps:e,state:n,value:t,onChange:s,isPlaceholder:a}){const{granularity:o}=n,l=m.useMemo(()=>{const u={year:"numeric",month:"numeric",day:"numeric"};return o==="minute"&&(u.hour="numeric",u.minute="numeric"),u},[o]),i=ie(l),c=m.useMemo(()=>t.toDate(),[t]),d=m.useMemo(()=>i.formatToParts(c).map(u=>{const g=rs(t,u.type,i.resolvedOptions()),f=a&&u.type!=="literal"?g.placeholder:u.value;return{type:u.type,text:u.value===", "?" ":f,...g,minLength:u.type!=="literal"?String(g.maxValue).length:1}}),[c,i,a,t]);return r.jsx("div",{className:"flex items-center",children:d.map((u,g)=>u.type==="literal"?r.jsx(as,{domProps:e,segment:u},g):r.jsx(ss,{isPlaceholder:a,domProps:e,state:n,value:t,onChange:s,segment:u},g))})}const Wt=V(r.jsx("path",{d:"M15.41 16.59 10.83 12l4.58-4.59L14 6l-6 6 6 6 1.41-1.41z"}),"KeyboardArrowLeftOutlined"),Yt=V(r.jsx("path",{d:"M8.59 16.59 13.17 12 8.59 7.41 10 6l6 6-6 6-1.41-1.41z"}),"KeyboardArrowRightOutlined");function os({date:e,currentMonth:n,state:{dayIsActive:t,dayIsHighlighted:s,dayIsRangeStart:a,dayIsRangeEnd:o,getCellProps:l,timezone:i,min:c,max:d}}){const{localeCode:u}=$e(),g=vn(e,u),f=t(e),h=s(e),v=a(e),b=o(e),y=xn(e,i),p=Mt(e,n),w=Qe(e,c,d);return r.jsxs("div",{role:"button","aria-disabled":w,className:D("w-40 h-40 text-sm relative isolate flex-shrink-0",w&&"text-disabled pointer-events-none",!p&&"invisible pointer-events-none"),...l(e,p),children:[r.jsx("span",{className:D("absolute inset-0 flex items-center justify-center rounded-full w-full h-full select-none z-10 cursor-pointer",!f&&!y&&"hover:bg-hover",f&&"bg-primary text-on-primary font-semibold",y&&!f&&"bg-chip"),children:e.day}),h&&p&&r.jsx("span",{className:D("absolute w-full h-full inset-0 bg-primary/focus",(v||g===0||e.day===1)&&"rounded-l-full",(b||g===6||e.day===n.calendar.getDaysInMonth(n))&&"rounded-r-full")})]})}function ls({startDate:e,state:n,isFirst:t,isLast:s}){const{localeCode:a}=$e(),o=bn(e,a),l=Se(e,a);return r.jsxs("div",{className:"w-280 flex-shrink-0",children:[r.jsx(is,{isFirst:t,isLast:s,state:n,currentMonth:e}),r.jsxs("div",{className:"block",role:"grid",children:[r.jsx(cs,{state:n,startDate:e}),[...new Array(o).keys()].map(i=>r.jsx(ce.div,{className:"flex mb-6",children:[...new Array(7).keys()].map(c=>r.jsx(os,{date:l.add({weeks:i,days:c}),currentMonth:e,state:n},c))},i))]})]})}function is({currentMonth:e,isFirst:n,isLast:t,state:{calendarDates:s,setCalendarDates:a,timezone:o,min:l,max:i}}){const c=f=>{const h=s.length;let v;f==="forward"?v=s.map(b=>Pe(b.add({months:h}))):v=s.map(b=>Pe(b.subtract({months:h}))),a(v)},d=ie({month:"long",year:"numeric",era:e.calendar.identifier!=="gregory"?"long":void 0,calendar:e.calendar.identifier}),u=Qe(e.subtract({days:1}),l,i),g=Qe(De(e.add({months:1})),l,i);return r.jsxs("div",{className:"flex items-center justify-between gap-10",children:[r.jsx(W,{size:"md",className:D("text-muted",!n&&"invisible"),disabled:!n||u,"aria-hidden":!n,onClick:()=>{c("backward")},children:r.jsx(Wt,{})}),r.jsx("div",{className:"text-sm font-semibold select-none",children:d.format(e.toDate(o))}),r.jsx(W,{size:"md",className:D("text-muted",!t&&"invisible"),disabled:!t||g,"aria-hidden":!t,onClick:()=>{c("forward")},children:r.jsx(Yt,{})})]})}function cs({state:{timezone:e},startDate:n}){const{localeCode:t}=$e(),s=ie({weekday:"short"}),a=Se(n,t);return r.jsx("div",{className:"flex",children:[...new Array(7).keys()].map(o=>{const i=a.add({days:o}).toDate(e),c=s.format(i);return r.jsx("div",{className:"w-40 h-40 text-sm font-semibold relative flex-shrink-0",children:r.jsx("div",{className:"absolute flex items-center justify-center w-full h-full select-none",children:c})},o)})})}function qt({state:e,visibleMonths:n=1}){return ye()&&(n=1),r.jsx(m.Fragment,{children:[...new Array(n).keys()].map(s=>{const a=pe(De(e.calendarDates[s])),o=s===0,l=s===n-1;return r.jsx(ls,{state:e,startDate:a,isFirst:o,isLast:l},s)})})}const Gt=m.memo(({start:e,end:n,options:t,preset:s})=>{const{dates:a}=Nt(),o=tt(),l=ie(t||yn[s||(a==null?void 0:a.format)]);if(!e||!n)return null;let i;try{i=l.formatRange(yt(e,o),yt(n,o))}catch{i=""}return r.jsx(m.Fragment,{children:i})},Rt);function yt(e,n){return typeof e=="string"?wn(e,n).toDate():"toDate"in e?e.toDate(n):e}function us({onPresetSelected:e,selectedValue:n}){return r.jsx(jn,{className:"min-w-192",padding:"py-14",dataTestId:"date-range-preset-list",children:ut.map(t=>r.jsx(kn,{borderRadius:"rounded-none",capitalizeFirst:!0,isSelected:(n==null?void 0:n.preset)===t.key,onSelected:()=>{const s=t.getRangeValue();e(s)},children:r.jsx($,{...t.label})},t.key))})}function ds(e){return et("(max-width: 1024px)",e)}function fs({state:e,showInlineDatePickerField:n=!1}){const t=ds(),{close:s}=nt(),a=m.useRef(e),o=e.isPlaceholder.start||e.isPlaceholder.end,l=r.jsxs(st,{dividerTop:!0,startAction:!o&&!t?r.jsx("div",{className:"text-xs",children:r.jsx(Gt,{start:e.selectedValue.start.toDate(),end:e.selectedValue.end.toDate(),options:{dateStyle:"medium"}})}):void 0,children:[r.jsx(ee,{variant:"text",size:"xs",onClick:()=>{e.setSelectedValue(a.current.selectedValue),e.setIsPlaceholder(a.current.isPlaceholder),s()},children:r.jsx($,{message:"Cancel"})}),r.jsx(ee,{variant:"flat",color:"primary",size:"xs",onClick:()=>{s(e.selectedValue)},children:r.jsx($,{message:"Select"})})]});return r.jsxs(Ae,{size:"auto",children:[r.jsxs(at,{className:"flex",padding:"p-0",children:[!t&&r.jsx(us,{selectedValue:e.selectedValue,onPresetSelected:i=>{e.setSelectedValue(i),e.closeDialogOnSelection&&s(i)}}),r.jsx(be,{initial:!1,children:r.jsx(ms,{state:e,showInlineDatePickerField:n})})]}),!e.closeDialogOnSelection&&l]})}function ms({state:e,showInlineDatePickerField:n}){return r.jsxs(ce.div,{initial:{width:0,overflow:"hidden"},animate:{width:"auto"},exit:{width:0,overflow:"hidden"},transition:{type:"tween",duration:.125},className:"border-l px-20 pt-10 pb-20",children:[n&&r.jsx(hs,{state:e}),r.jsx("div",{className:"flex items-start gap-36",children:r.jsx(qt,{state:e,visibleMonths:2})})]})}function hs({state:e}){const{selectedValue:n,setSelectedValue:t}=e;return r.jsxs(dt,{className:"mb-20 mt-10",children:[r.jsx(xe,{state:e,value:n.start,onChange:s=>{t({...n,start:s})}}),r.jsx(_t,{className:"block flex-shrink-0 text-muted",size:"md"}),r.jsx(xe,{state:e,value:n.end,onChange:s=>{t({...n,end:s})}})]})}function gs(e){var f,h;const{granularity:n,closeDialogOnSelection:t,...s}=e,a=es(e),o=m.useRef(null),i=ye()&&n!=="day",c=r.jsx(rt,{offset:8,placement:"bottom-start",isOpen:a.calendarIsOpen,onOpenChange:a.setCalendarIsOpen,type:"popover",triggerRef:o,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:r.jsx(fs,{state:a})}),d={onClick:v=>{v.stopPropagation(),v.preventDefault(),ps(v)?a.setCalendarIsOpen(!1):a.setCalendarIsOpen(!0)}},u=a.selectedValue,g=a.setSelectedValue;return r.jsxs(m.Fragment,{children:[r.jsxs(dt,{ref:o,wrapperProps:d,endAdornment:i?void 0:r.jsx(Bt,{}),...s,children:[r.jsx(xe,{isPlaceholder:(f=a.isPlaceholder)==null?void 0:f.start,state:a,segmentProps:d,value:u.start,onChange:v=>{g({start:v,end:u.end})}}),r.jsx(_t,{className:"block flex-shrink-0 text-muted",size:"md"}),r.jsx(xe,{isPlaceholder:(h=a.isPlaceholder)==null?void 0:h.end,state:a,segmentProps:d,value:u.end,onChange:v=>{g({start:u.start,end:v})}})]}),c]})}function ps(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}function vs(e){const{field:{onChange:n,onBlur:t,value:s,ref:a},fieldState:{invalid:o,error:l}}=we({name:e.name}),i={onChange:c=>{n(c?Xt(c):null)},onBlur:t,value:xs(s),invalid:o,errorMessage:l==null?void 0:l.message,inputRef:a};return r.jsx(gs,{...ae(i,e)})}function xs(e){const{start:n,end:t,preset:s}=e||{},a={preset:s};try{n&&(a.start=typeof n=="string"?Ee(n):n),t&&(a.end=typeof t=="string"?Ee(t):t)}catch{}return a}function Xt({start:e,end:n,preset:t}={}){const s={preset:t};return e&&(s.start=e.toAbsoluteString()),n&&(s.end=n.toAbsoluteString()),s}function Qt(e){var n;return{...e,defaultOperator:ve.between,control:{type:H.DateRangePicker,defaultValue:((n=e.control)==null?void 0:n.defaultValue)||Xt(ut[3].getRangeValue())}}}function bs(e){return Qt({key:"created_at",label:I("Date created"),...e})}function ys(e){return Qt({key:"updated_at",label:I("Last updated"),...e})}const Ve=m.forwardRef(({className:e,circle:n,size:t="md",src:s,link:a,label:o,fallback:l="generic",...i},c)=>{let d=s?r.jsx("img",{ref:c,src:s,alt:o,className:"block object-cover w-full h-full"}):r.jsx("div",{className:"bg-alt dark:bg-chip w-full h-full",children:r.jsx(In,{viewBox:"0 0 48 48",className:"w-full h-full text-muted"})});o&&(d=r.jsx(zt,{label:o,children:d}));const u={...i,className:D(e,"relative block overflow-hidden select-none flex-shrink-0",ws(t),n?"rounded-full":"rounded")};return a?r.jsx(Cn,{...u,to:a,children:d}):r.jsx("div",{...u,children:d})});function ws(e){switch(e){case"xs":return"w-18 h-18";case"sm":return"w-24 h-24";case"md":return"w-32 h-32";case"lg":return"w-40 h-40";case"xl":return"w-60 h-60";default:return e}}const We="filters";function js(e){if(!e)return[];let n=[];try{n=JSON.parse(atob(decodeURIComponent(e))),n.map(t=>(t.valueKey!=null&&(t.value=t.valueKey),t))}catch{}return n}function ks(e,n){return!e||(e=n?e.filter(t=>t.value!=="").map(t=>Cs(t,n)):e,e=e.filter(t=>!t.isInactive),!e.length)?"":encodeURIComponent(btoa(JSON.stringify(e)))}function Cs(e,n){var s;const t=n.find(a=>a.key===e.key);if((t==null?void 0:t.control.type)==="select"){const a=(t.control.options||[]).find(o=>o.key===e.value);if(a)return{...e,value:a.value,valueKey:a.key}}return(s=t==null?void 0:t.extraFilters)!=null&&s.length&&(e.extraFilters=t.extraFilters),e}function Is(e,n){const[t]=Sn(),s=Dn(),a=t.get(We),o=m.useMemo(()=>{if(!e)return[];const u=js(a);return(n||[]).forEach(g=>{if(!u.find(f=>f.key===g)){const f=e.find(h=>h.key===g);u.push({key:g,value:f.control.defaultValue,operator:f.defaultOperator,isInactive:!0})}}),u.sort((g,f)=>e.findIndex(h=>h.key===g.key)-e.findIndex(h=>h.key===f.key)),u},[a,n,e]),l=m.useCallback(u=>{const g=[...o];return u.forEach(f=>{const h=typeof f=="object"?f.key:f,v=g.findIndex(b=>b.key===h);v>-1&&g.splice(v,1)}),g},[o]),i=m.useCallback(u=>{const g=ks(u,e);g?t.set(We,g):t.delete(We),s({search:`?${t}`},{replace:!0})},[e,s,t]),c=m.useCallback(u=>{const f=[...l(u),...u];i(f)},[l,i]),d=m.useCallback(u=>i(l([u])),[l,i]);return{add:c,remove:d,replaceAll:i,decodedFilters:o,encodedFilters:a}}function Te(e){return Pn()?e.metaKey:e.ctrlKey}function Ss(e){const{cellCount:n,rowCount:t}=e;return{onKeyDown:a=>{switch(a.key){case"ArrowLeft":q(a,{cell:{op:"decrement"}},e);break;case"ArrowRight":q(a,{cell:{op:"increment"}},e);break;case"ArrowUp":q(a,{row:{op:"decrement"}},e);break;case"ArrowDown":q(a,{row:{op:"increment"}},e);break;case"PageUp":q(a,{row:{op:"decrement",count:5}},e);break;case"PageDown":q(a,{row:{op:"increment",count:5}},e);break;case"Tab":Ds(a);break;case"Home":Te(a)?q(a,{row:{op:"decrement",count:t},cell:{op:"decrement",count:n}},e):q(a,{cell:{op:"decrement",count:n}},e);break;case"End":Te(a)?q(a,{row:{op:"increment",count:t},cell:{op:"increment",count:n}},e):q(a,{cell:{op:"increment",count:n}},e);break}}}}function q(e,n,{cellCount:t,rowCount:s}){var v,b,y,p,w,j,S;if(((v=document.activeElement)==null?void 0:v.tagName)==="input")return;e.preventDefault();const a=e.currentTarget,o=e.target.closest("[aria-colindex]");if(!o||!a)return;const l=o.closest("[aria-rowindex]");if(!l)return;let i=parseInt(l.getAttribute("aria-rowindex")),c=parseInt(o.getAttribute("aria-colindex"));if(Number.isNaN(i)||Number.isNaN(c))return;const d=((b=n.row)==null?void 0:b.count)??1;((y=n.row)==null?void 0:y.op)==="increment"?i=Math.min(s,i+d):((p=n.row)==null?void 0:p.op)==="decrement"&&(i=Math.max(1,i-d));const u=((w=n.cell)==null?void 0:w.count)??1;((j=n.cell)==null?void 0:j.op)==="increment"?c=Math.min(t,c+u):((S=n.cell)==null?void 0:S.op)==="decrement"&&(c=Math.max(1,c-u));const g=a.querySelector(`[aria-rowindex="${i}"] [aria-colindex="${c}"]`);if(!g)return;const h=$t(g).nextNode()||g;o.setAttribute("tabindex","-1"),h.setAttribute("tabindex","0"),h.focus()}function Ds(e){const n=e.currentTarget;if(e.shiftKey)n.focus();else{const t=$t(n,{tabbable:!0});let s,a;do a=t.lastChild(),a&&(s=a);while(a);s&&!s.contains(document.activeElement)&&En(s)}}const G=m.createContext(null);function Zt({index:e,isHeader:n}){const{columns:t,cellHeight:s="h-46"}=m.useContext(G),a=t[e],o=a==null?void 0:a.padding;let l="justify-start";return(a==null?void 0:a.align)==="center"?l="justify-center":(a==null?void 0:a.align)==="end"&&(l="justify-end"),D("flex items-center overflow-hidden whitespace-nowrap overflow-ellipsis outline-none focus-visible:outline focus-visible:outline-offset-2",n?"h-46":s,(a==null?void 0:a.width)??"flex-1",a==null?void 0:a.maxWidth,a==null?void 0:a.minWidth,l,o,a==null?void 0:a.className)}function Ps({rowIndex:e,rowIsHovered:n,index:t,item:s,id:a}){const{columns:o}=m.useContext(G),l=o[t],i=m.useMemo(()=>({index:e,isHovered:n,isPlaceholder:s.isPlaceholder}),[e,n,s.isPlaceholder]),c=Zt({index:t,isHeader:!1});return r.jsx("div",{tabIndex:-1,role:"gridcell","aria-colindex":t+1,id:a,className:c,children:r.jsx("div",{className:"overflow-x-hidden overflow-ellipsis min-w-0 w-full",children:l.body(s,i)})})}function Es({onMoveStart:e,onMove:n,onMoveEnd:t,minimumMovement:s=0,preventDefault:a,stopPropagation:o=!0,onPress:l,onLongPress:i,...c}){const u=m.useRef({lastPosition:{x:0,y:0},started:!1,longPressTriggered:!1}).current,{addGlobalListener:g,removeGlobalListener:f}=Ot(),h=p=>{!u.el||(e==null?void 0:e(p,u.el))===!1||(u.originalTouchAction=u.el.style.touchAction,u.el.style.touchAction="none",u.originalUserSelect=document.documentElement.style.userSelect,document.documentElement.style.userSelect="none",u.started=!0)},v=p=>{var w;if(p.button===0&&u.id==null){if(u.started=!1,((w=c.onPointerDown)==null?void 0:w.call(c,p))===!1)return;o&&p.stopPropagation(),a&&p.preventDefault(),u.id=p.pointerId,u.el=p.currentTarget,u.lastPosition={x:p.clientX,y:p.clientY},i&&(u.longPressTimer=setTimeout(()=>{i(p,u.el),u.longPressTriggered=!0},400)),(e||n)&&g(window,"pointermove",b,!1),g(window,"pointerup",y,!1),g(window,"pointercancel",y,!1)}},b=p=>{if(p.pointerId===u.id){const w=p.clientX-u.lastPosition.x,j=p.clientY-u.lastPosition.y;(Math.abs(w)>=s||Math.abs(j)>=s)&&!u.started&&h(p),u.started&&(n==null||n(p,w,j),u.lastPosition={x:p.clientX,y:p.clientY})}},y=p=>{var w;if(p.pointerId===u.id){u.longPressTimer&&clearTimeout(u.longPressTimer);const j=u.longPressTriggered;u.longPressTriggered=!1,u.started&&(t==null||t(p)),u.el&&(p.type!=="pointercancel"&&((w=c.onPointerUp)==null||w.call(c,p,u.el),p.target&&u.el.contains(p.target)&&(j?i==null||i(p,u.el):l==null||l(p,u.el))),document.documentElement.style.userSelect=u.originalUserSelect||"",u.el.style.touchAction=u.originalTouchAction||""),u.id=void 0,u.started=!1,f(window,"pointermove",b,!1),f(window,"pointerup",y,!1),f(window,"pointercancel",y,!1)}};return{domProps:{onPointerDown:re(v)}}}function Ts(e){return e.shiftKey||Te(e)}function Ms({index:e,isSelected:n,isHeader:t}){const s=Tn(),a=ye(),{hideBorder:o,enableSelection:l,collapseOnMobile:i}=m.useContext(G);return D("flex gap-x-16 break-inside-avoid outline-none border border-transparent",a&&i&&o?"mb-8 pl-8 pr-0 rounded":"px-16",!o&&"border-b-divider",!o&&e===0&&"border-t-divider",n&&!s&&"bg-primary/selected hover:bg-primary/focus focus-visible:bg-primary/focus",n&&s&&"bg-selected hover:bg-focus focus-visible:bg-focus",!n&&!t&&l&&"focus-visible:bg-focus hover:bg-hover")}const Ns=["button","a","input","select","textarea"];function Rs({item:e,index:n,renderAs:t,className:s,style:a}){const{selectedRows:o,columns:l,toggleRow:i,selectRow:c,onAction:d,selectRowOnContextMenu:u,enableSelection:g,selectionStyle:f,hideHeaderRow:h}=m.useContext(G),v=m.useRef(!1),b=o.includes(e.id),[y,p]=m.useState(!1),w=k=>k.target.closest(Ns.join(",")),j=k=>{f==="highlight"&&d&&!v.current&&!w(k)&&(k.preventDefault(),k.stopPropagation(),d(e,n))},S=!!o.length,T=k=>{w(k)||(f==="checkbox"?g&&(S||!d)?i(e):d&&d(e,n):f==="highlight"&&(v.current?g&&S?i(e):d==null||d(e,n):g&&c(e,Ts(k))))},{domProps:M}=Es({onPointerDown:k=>{v.current=k.pointerType==="touch"},onPress:T,onLongPress:g?()=>{v.current&&i(e)}:void 0}),x=k=>{g&&k.key===" "?(k.preventDefault(),k.stopPropagation(),f==="checkbox"?i(e):c(e)):k.key==="Enter"&&!o.length&&d&&(k.preventDefault(),k.stopPropagation(),d(e,n))},E=k=>{u&&g&&(o.includes(e.id)||c(e)),v.current&&(k.preventDefault(),k.stopPropagation())},N=Ms({index:n,isSelected:b}),O=t||"div";return r.jsx(O,{role:"row","aria-rowindex":n+1+(h?0:1),"aria-selected":b,tabIndex:-1,className:D(s,N),item:O==="div"?void 0:e,onDoubleClick:re(j),onKeyDown:re(x),onContextMenu:re(E),onPointerEnter:re(()=>p(!0)),onPointerLeave:re(()=>p(!1)),style:a,...M,children:l.map((k,F)=>r.jsx(Ps,{rowIndex:n,rowIsHovered:y,index:F,item:e},`${e.id}-${k.key}`))})}const zs={key:"checkbox",header:()=>r.jsx(Os,{}),align:"center",width:"w-24 flex-shrink-0",body:(e,n)=>n.isPlaceholder?r.jsx(le,{size:"w-24 h-24",variant:"rect"}):r.jsx($s,{item:e})};function $s({item:e}){const{selectedRows:n,toggleRow:t}=m.useContext(G);return r.jsx(At,{checked:n.includes(e.id),onChange:()=>t(e)})}function Os(){const{trans:e}=Y(),{data:n,selectedRows:t,onSelectionChange:s}=m.useContext(G),a=!!n.length&&n.length===t.length,o=!a&&!!t.length;return r.jsx(At,{"aria-label":e({message:"Select all"}),isIndeterminate:o,checked:a,onChange:()=>{s(a?[]:n.map(l=>l.id))}})}const As=V(r.jsx("path",{d:"m20 12-1.41-1.41L13 16.17V4h-2v12.17l-5.58-5.59L4 12l8 8 8-8z"}),"ArrowDownwardOutlined");function Fs({index:e}){const{columns:n,sortDescriptor:t,onSortChange:s,enableSorting:a}=m.useContext(G),o=n[e],l=Zt({index:e,isHeader:!0}),[i,c]=m.useState(!1),d=o.sortingKey||o.key,u=o.allowsSorting&&a,{orderBy:g,orderDir:f}=t||{},h=u&&g===d;let v;h&&f==="asc"?v="ascending":h&&f==="desc"?v="descending":u&&(v="none");const b=()=>{if(!u)return;let w;h&&f==="desc"?w={orderDir:"asc",orderBy:d}:h&&f==="asc"?w={orderBy:void 0,orderDir:void 0}:w={orderDir:"desc",orderBy:d},s==null||s(w)},y=h||i,p={visible:{opacity:1,y:0},hidden:{opacity:0,y:"-25%"}};return r.jsxs("div",{role:"columnheader",tabIndex:-1,"aria-colindex":e+1,"aria-sort":v,className:D(l,"text-muted font-medium text-xs",u&&"cursor-pointer"),onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},onKeyDown:w=>{(w.key===" "||w.key==="Enter")&&(w.preventDefault(),b())},onClick:b,children:[o.hideHeader?r.jsx("div",{className:"sr-only",children:o.header()}):o.header(),r.jsx(be,{children:u&&r.jsx(ce.span,{variants:p,animate:y?"visible":"hidden",initial:!1,transition:{type:"tween"},className:"inline-block ml-6 -mt-2","data-testid":"table-sort-button","aria-hidden":!y,children:r.jsx(As,{size:"xs",className:D("text-muted",f==="asc"&&g===d&&"rotate-180 transition-transform")})},"sort-icon")})]})}function Ls(){const{columns:e}=m.useContext(G);return r.jsx("div",{role:"row","aria-rowindex":1,tabIndex:-1,className:"flex gap-x-16 px-16",children:e.map((n,t)=>r.jsx(Fs,{index:t},n.key))})}function gr({className:e,columns:n,collapseOnMobile:t=!0,hideHeaderRow:s=!1,hideBorder:a=!1,data:o,selectedRows:l,defaultSelectedRows:i,onSelectionChange:c,sortDescriptor:d,onSortChange:u,enableSorting:g=!0,onDelete:f,enableSelection:h=!0,selectionStyle:v="checkbox",ariaLabelledBy:b,selectRowOnContextMenu:y,onAction:p,renderRowAs:w,tableBody:j,meta:S,tableRef:T,closeOnInteractOutside:M=!1,cellHeight:x,...E}){const N=ye(),O=!!N&&t;O&&(s=!0,a=!0);const[k,F]=J(l,i||[],c),[se,X]=J(d,void 0,u),P=m.useCallback(z=>{const U=[...k];if(!U.includes(z.id))U.push(z.id);else{const ue=U.indexOf(z.id);U.splice(ue,1)}F(U)},[k,F]),C=m.useCallback((z,U)=>{let ue=[];z&&(ue=U?[...k==null?void 0:k.filter(me=>me!==z.id),z.id]:[z.id]),F(ue)},[k,F]),R=m.useMemo(()=>{const z=n.filter(ue=>{const me=ue.visibleInMode||"regular";if(me==="all"||me==="compact"&&O||me==="regular"&&!O)return!0});return h&&v!=="highlight"&&!N&&z.unshift(zs),z},[N,n,h,v,O]),L={isCollapsedMode:O,cellHeight:x,hideBorder:a,hideHeaderRow:s,selectedRows:k,onSelectionChange:F,enableSorting:g,enableSelection:h,selectionStyle:v,data:o,columns:R,sortDescriptor:se,onSortChange:X,toggleRow:P,selectRow:C,onAction:p,selectRowOnContextMenu:y,meta:S,collapseOnMobile:t},B=Ss({cellCount:h?R.length+1:R.length,rowCount:o.length+1}),ke={renderRowAs:w};j?j=m.cloneElement(j,ke):j=r.jsx(Vs,{...ke});const ht=ze(T);return Mn({ref:ht,onInteractOutside:z=>{M&&h&&(k!=null&&k.length)&&!z.target.closest('[role="dialog"]')&&F([])}}),r.jsx(G.Provider,{value:L,children:r.jsxs("div",{...ae(E,B,{onKeyDown:z=>{z.key==="Escape"?(z.preventDefault(),z.stopPropagation(),k!=null&&k.length&&F([])):z.key==="Delete"?(z.preventDefault(),z.stopPropagation(),k!=null&&k.length&&(f==null||f(o.filter(U=>k==null?void 0:k.includes(U.id))))):Te(z)&&z.key==="a"&&(z.preventDefault(),z.stopPropagation(),h&&F(o.map(U=>U.id)))}}),role:"grid",tabIndex:0,"aria-rowcount":o.length+1,"aria-colcount":R.length+1,ref:ht,"aria-multiselectable":h?!0:void 0,"aria-labelledby":b,className:D(e,"select-none isolate outline-none text-sm focus-visible:ring-2"),children:[!s&&r.jsx(Ls,{}),j]})})}function Vs({renderRowAs:e}){const{data:n}=m.useContext(G);return r.jsx(m.Fragment,{children:n.map((t,s)=>r.jsx(Rs,{item:t,index:s,renderAs:e},t.id))})}function Hs({filter:e}){const{trans:n}=Y();return r.jsx(Ft,{size:"sm",name:`${e.key}.value`,selectionMode:"single",showSearchField:e.control.showSearchField,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,searchPlaceholder:e.control.searchPlaceholder?n(e.control.searchPlaceholder):void 0,children:e.control.options.map(t=>r.jsx(Fe,{value:t.key,children:r.jsx($,{...t.label})},t.key))})}function Bs({filter:e}){return r.jsx(vs,{min:e.control.min,max:e.control.max,size:"sm",name:`${e.key}.value`,granularity:"day",closeDialogOnSelection:!0})}const Us=(e,n="normalized-models")=>`${n}/${e}`;function Ks(e,n,t,s){const a=Us(e,s);return Lt([a,n],()=>_s(a,n),{keepPreviousData:!0,...t})}async function _s(e,n){return Le.get(e,{params:n}).then(t=>t.data)}const Ws=(e,n,t="normalized-models")=>`${t}/${e}/${n}`;function Jt(e,n,t,s){const a=Ws(e,n,s);return Lt([a,t],()=>Ys(a,t),{enabled:e!=null&&n!=null})}async function Ys(e,n){return Le.get(e,{params:n}).then(t=>t.data)}function qs({modelType:e,label:n,className:t,value:s,defaultValue:a="",onChange:o,description:l,errorMessage:i,invalid:c,openMenuOnFocus:d,autoFocus:u,queryParams:g,customEndpoint:f,disabled:h}){var M;const v=m.useRef(null),[b,y]=m.useState(""),[p,w]=J(s,a,o),j=Ks(e,{query:b,...g},null,f),{trans:S}=Y(),T=Re({size:"md"});return p?r.jsxs("div",{className:t,children:[r.jsx("div",{className:T.label,children:n}),r.jsx("div",{className:D("p-10 border rounded",c&&"border-danger"),children:r.jsx(be,{initial:!1,mode:"wait",children:r.jsx(Gs,{disabled:h,endpoint:f,modelType:e,modelId:p,queryParams:g,onEditClick:()=>{w(""),y(""),requestAnimationFrame(()=>{var x;(x=v.current)==null||x.focus()})}})})}),l&&!i&&r.jsx("div",{className:T.description,children:l}),i&&r.jsx("div",{className:T.error,children:i})]}):r.jsx(Nn,{className:t,showSearchField:!0,invalid:c,errorMessage:i,description:l,isAsync:!0,placeholder:S(I("Select item...")),searchPlaceholder:S(I("Find an item...")),label:n,isLoading:j.isFetching,items:(M=j.data)==null?void 0:M.results,inputValue:b,onInputValueChange:y,selectionMode:"single",selectedValue:p,onSelectionChange:w,ref:v,autoFocus:u,disabled:h,children:x=>r.jsx(Fe,{value:x.id,description:x.description,startIcon:r.jsx(Ve,{src:x.image}),children:x.name},x.id)})}function Gs({modelType:e,modelId:n,onEditClick:t,endpoint:s,disabled:a,queryParams:o}){const{data:l,isLoading:i}=Jt(e,n,o,s);return i||!(l!=null&&l.model)?r.jsx(Xs,{},"skeleton"):r.jsxs(ce.div,{className:D("flex items-center gap-10",a&&"text-disabled cursor-not-allowed pointer-events-none"),...ot,children:[l.model.image&&r.jsx(Ve,{src:l.model.image}),r.jsxs("div",{children:[r.jsx("div",{children:l.model.name}),r.jsx("div",{className:"text-muted text-xs",children:l.model.description})]}),r.jsx(zt,{label:r.jsx($,{message:"Change item"}),children:r.jsx(W,{className:"ml-auto text-muted",size:"sm",onClick:t,disabled:a,children:r.jsx(Yn,{})})})]},"preview")}function Xs(){return r.jsxs(ce.div,{className:"flex items-center gap-10",...ot,children:[r.jsx(le,{variant:"rect",size:"w-32 h-32"}),r.jsxs("div",{className:"flex-auto max-h-[36px]",children:[r.jsx(le,{className:"text-xs"}),r.jsx(le,{className:"text-xs max-h-8"})]}),r.jsx(le,{variant:"icon",size:"w-24 h-24"})]})}function Qs({name:e,...n}){const{field:{onChange:t,value:s=""},fieldState:{invalid:a,error:o}}=we({name:e});return r.jsx(qs,{value:s,onChange:t,invalid:a,errorMessage:o==null?void 0:o.message,...n})}function Zs({filter:e}){return r.jsx(Qs,{name:`${e.key}.value`,modelType:e.control.model,openMenuOnFocus:!0})}const en={"=":I("is"),"!=":I("is not"),">":I("is greater than"),">=":I("is greater than or equal to"),"<":I("is less than"),"<=":I("is less than or equal to"),has:I("Include"),doesntHave:I("Do not include"),between:I("Is between"),hasAll:I("Include all")};function Js({filter:e}){var t;const n=e.control;return r.jsxs(m.Fragment,{children:[r.jsx(Ft,{selectionMode:"single",name:`${e.key}.operator`,className:"mb-14",size:"sm",required:!0,children:(t=e.operators)==null?void 0:t.map(s=>r.jsx(Fe,{value:s,children:r.jsx($,{...en[s]})},s))}),r.jsx(Rn,{size:"sm",name:`${e.key}.value`,type:e.control.inputType,min:"minValue"in n?n.minValue:void 0,max:"maxValue"in n?n.maxValue:void 0,minLength:"minLength"in n?n.minLength:void 0,maxLength:"maxLength"in n?n.maxLength:void 0,required:!0})]})}function ea({className:e,children:n,size:t,color:s,radius:a,selectable:o}){return r.jsx("div",{className:D(e,"flex items-center gap-8 flex-wrap"),children:m.Children.map(n,l=>{if(m.isValidElement(l))return m.cloneElement(l,{size:t,color:s,selectable:o,radius:a})})})}function Ze(e){return{id:e,name:`${e}`,description:`${e}`}}function ta(e,n){const t=m.useRef(null),s=ze(n),{displayWith:a=B=>B.name,validateWith:o,children:l,suggestions:i,isLoading:c,inputValue:d,onInputValueChange:u,onItemSelected:g,placeholder:f,onOpenChange:h,chipSize:v="md",openMenuOnFocus:b=!0,showEmptyMessage:y,value:p,defaultValue:w,onChange:j,valueKey:S,isAsync:T,allowCustomValue:M=!0,showDropdownArrow:x,onChipClick:E,...N}=e,O=Re({...e,flexibleHeight:!0}),[k,F]=aa(e),[se,X]=m.useState(!1),P=r.jsx(lt,{isIndeterminate:!0,size:"sm","aria-label":"loading..."}),C=x?r.jsx(it,{}):null,{fieldProps:R,inputProps:L}=Et({...N,focusRef:s,endAdornment:c&&se?P:C});return r.jsx(Tt,{fieldClassNames:O,...R,children:r.jsxs(Ut,{ref:t,className:D("flex items-center flex-wrap",O.input),onClick:()=>{var B;(B=s.current)==null||B.focus()},children:[r.jsx(na,{displayChipUsing:a,onChipClick:E,items:k,setItems:F,chipSize:v}),r.jsx(sa,{showEmptyMessage:y,inputProps:L,inputValue:d,onInputValueChange:u,fieldRef:t,inputRef:s,chips:k,setChips:F,validateWith:o,isLoading:c,suggestions:i,placeholder:f,openMenuOnFocus:b,listboxIsOpen:se,setListboxIsOpen:X,allowCustomValue:M,children:l})]})})}function na({items:e,setItems:n,displayChipUsing:t,chipSize:s,onChipClick:a}){const o=Oe(),l=m.useCallback(i=>{const c=e.findIndex(u=>u.id===i),d=[...e];return c>-1&&(d.splice(c,1),n(d)),d},[e,n]);return r.jsx(ea,{className:"flex-shrink-0 flex-wrap max-w-full my-8",size:s,selectable:!0,children:e.map(i=>r.jsx(zn,{errorMessage:i.errorMessage,adornment:i.image?r.jsx(Ve,{circle:!0,src:i.image}):null,onClick:()=>a==null?void 0:a(i),onRemove:()=>{l(i.id).length?o.focusPrevious({tabbable:!0}):o.focusLast()},children:t(i)},i.id))})}function sa(e){const{inputRef:n,fieldRef:t,validateWith:s,setChips:a,chips:o,suggestions:l,inputProps:i,placeholder:c,openMenuOnFocus:d,listboxIsOpen:u,setListboxIsOpen:g,allowCustomValue:f}=e,h="outline-none text-sm mx-8 my-4 h-30 flex-auto",v=Oe(),b=m.useCallback(P=>{P=(P||[]).filter(C=>{const R=!C||!C.id||!C.name;return!(o.findIndex(B=>B.id===(C==null?void 0:C.id))>-1)&&!R}),P.length&&(s&&(P=P.map(C=>s(C))),a([...o,...P]))},[o,a,s]),y=$n({...e,clearInputOnItemSelection:!0,isOpen:u,onOpenChange:g,items:l,selectionMode:"none",role:"listbox",virtualFocus:!0,onItemSelected:P=>{k(P)}}),{state:{activeIndex:p,setActiveIndex:w,isOpen:j,setIsOpen:S,inputValue:T,setInputValue:M},refs:x,listboxId:E,collection:N,onInputChange:O}=y,k=P=>{const C=N.size&&p!=null?[...N.values()][p]:null;C!=null&&C.item?b([C.item]):f&&b([Ze(C?C.value:P)]),M(""),w(null),S(!1)};On(()=>{t.current&&x.reference.current!==t.current&&y.reference(t.current)},[t,y,x]);const{handleTriggerKeyDown:F,handleListboxKeyboardNavigation:se}=Ln(y),X=re(()=>{d&&!j&&S(!0)});return r.jsx(An,{listbox:y,mobileOverlay:Fn,onPointerDown:P=>{P.preventDefault()},children:r.jsx("input",{type:"text",className:D(h,"bg-transparent"),placeholder:c,...ae(i,{ref:n,value:T,onChange:O,onPaste:P=>{const R=P.clipboardData.getData("text").match(/([a-zA-Z0-9._-]+@[a-zA-Z0-9._-]+\.[a-zA-Z0-9._-]+)/gi);if(R){P.preventDefault();const L=window.getSelection();L!=null&&L.rangeCount&&(L.deleteFromDocument(),b(R.map(B=>Ze(B))))}},"aria-autocomplete":"list","aria-controls":j?E:void 0,autoComplete:"off",autoCorrect:"off",spellCheck:"false",onKeyDown:P=>{const C=P.target;if(P.key==="Enter"){P.preventDefault(),k(C.value);return}if(P.key==="Escape"&&j&&(S(!1),M("")),P.key==="ArrowUp"&&j&&(p===0||p==null)){w(null);return}if(p!=null&&(P.key==="ArrowLeft"||P.key==="ArrowRight")){P.preventDefault();return}if((P.key==="ArrowLeft"||P.key==="Backspace"||P.key==="Delete")&&C.selectionStart===0&&p==null&&o.length){v.focusPrevious({tabbable:!0});return}F(P)||se(P)},onFocus:X,onClick:X})})})}function aa({onChange:e,value:n,defaultValue:t,valueKey:s}){const a=m.useMemo(()=>wt(n),[n]),o=m.useMemo(()=>wt(t),[t]),l=m.useCallback(i=>{const c=s?i.map(d=>d[s]):i;e==null||e(c)},[e,s]);return J(a||void 0,o||[],l)}function wt(e){if(e!=null)return e.map(n=>typeof n!="object"?Ze(n):n)}const ra=fe.forwardRef(ta);function oa({children:e,...n}){const{field:{onChange:t,onBlur:s,value:a=[],ref:o},fieldState:{invalid:l,error:i}}=we({name:n.name}),c={onChange:t,onBlur:s,value:a,invalid:l,errorMessage:i==null?void 0:i.message};return r.jsx(ra,{ref:o,...ae(c,n),children:e})}function la({filter:e}){const{trans:n}=Y();return r.jsx(oa,{size:"sm",name:`${e.key}.value`,valueKey:"id",allowCustomValue:!1,showDropdownArrow:!0,placeholder:e.control.placeholder?n(e.control.placeholder):void 0,displayWith:t=>{var s;return(s=e.control.options.find(a=>a.key===t.id))==null?void 0:s.label.message},suggestions:e.control.options.map(t=>({id:t.key,name:t.label.message})),children:t=>r.jsx(Fe,{value:t.id,children:r.jsx($,{message:t.name})},t.id)})}const tn=m.forwardRef((e,n)=>{const{isInactive:t,filter:s,...a}=e;return t?r.jsx(ia,{filter:s,...a,ref:n}):r.jsx(ca,{filter:s,...a,ref:n})}),ia=m.forwardRef(({filter:e,...n},t)=>r.jsx(ee,{variant:"outline",size:"xs",color:"paper",radius:"rounded-md",border:"border",ref:t,endIcon:r.jsx(it,{}),...n,children:r.jsx($,{...e.label})})),ca=m.forwardRef(({filter:e,children:n,...t},s)=>{const a=e.control.type===H.BooleanToggle;return r.jsxs(ee,{variant:"outline",size:"xs",color:"primary",radius:"rounded-r-md",border:"border-y border-r",endIcon:!a&&r.jsx(it,{}),ref:s,...t,children:[r.jsx("span",{className:D(!a&&"border-r border-r-primary-light mr-8 pr-8"),children:r.jsx($,{...e.label})}),n]})});function je(e){const{onValueChange:n,isInactive:t,filter:s,label:a}=e;return r.jsxs(rt,{offset:10,type:"popover",onClose:o=>{o!==void 0&&n(o)},children:[r.jsx(tn,{isInactive:t,filter:s,children:a}),r.jsx(ua,{...e})]})}function ua({filter:e,panel:n,value:t,operator:s}){const a=Vn({defaultValues:{[e.key]:{value:t,operator:s}}}),{close:o,formId:l}=nt();return r.jsxs(Ae,{size:"xs",children:[r.jsx(Hn,{children:r.jsx($,{...e.label})}),r.jsx(at,{padding:"px-14 pt-14 pb-4 max-h-288",children:r.jsxs(Bn,{form:a,id:l,onSubmit:i=>{o(i[e.key])},children:[e.description&&r.jsx("div",{className:"text-muted text-xs mb-14",children:r.jsx($,{...e.description})}),n]})}),r.jsx(st,{children:r.jsx(ee,{form:l,type:"submit",variant:"flat",color:"primary",size:"xs",children:r.jsx($,{message:"Apply"})})})]})}const da=m.memo(({value:e,...n})=>{const t=Un(n);return isNaN(e)&&(e=0),r.jsx(m.Fragment,{children:t.format(e)})},Rt);function fa(e){switch(e.filter.control.type){case H.DateRangePicker:return r.jsx(ma,{...e});case H.BooleanToggle:return r.jsx(ha,{...e});case H.Select:return r.jsx(ga,{...e});case H.ChipField:return r.jsx(pa,{...e});case H.Input:return r.jsx(xa,{...e});case H.SelectModel:return r.jsx(ba,{...e});case H.Custom:const n=e.filter.control.listItem;return r.jsx(n,{...e});default:return null}}function ma(e){const{value:n,filter:t}=e;let s;return n.preset!==void 0?s=r.jsx($,{...ut[n.preset].label}):s=r.jsx(Gt,{start:new Date(n.start),end:new Date(n.end),options:{dateStyle:"medium"}}),r.jsx(je,{...e,label:s,panel:r.jsx(Bs,{filter:t})})}function ha({filter:e,isInactive:n,onValueChange:t}){return r.jsx(tn,{onClick:()=>{t({value:e.control.defaultValue})},filter:e,isInactive:n})}function ga(e){const{filter:n,value:t}=e,s=n.control.options.find(a=>a.key===t);return r.jsx(je,{...e,label:s?r.jsx($,{...s.label}):null,panel:r.jsx(Hs,{filter:n})})}function pa(e){return r.jsx(je,{...e,label:r.jsx(va,{...e}),panel:r.jsx(la,{filter:e.filter})})}function va(e){const{trans:n}=Y(),{filter:t,value:s}=e,a=s.map(c=>t.control.options.find(d=>d.key===c)),o=3,l=s.length-o,i=r.jsx(m.Fragment,{children:a.filter(Boolean).slice(0,o).map((c,d)=>{let u="";return d!==0&&(u+=", "),u+=n(c.label),u})});return l>0?r.jsx($,{message:":names + :count more",values:{names:i,count:l}}):i}function xa(e){const{filter:n,value:t,operator:s}=e,a=s?r.jsx($,{...en[s]}):null,o=n.control.inputType==="number"?r.jsx(da,{value:t}):t;return r.jsx(je,{...e,label:r.jsxs(m.Fragment,{children:[a," ",o]}),panel:r.jsx(Js,{filter:n})})}function ba(e){const{value:n,filter:t}=e,{isLoading:s,data:a}=Jt(t.control.model,n),o=r.jsxs(m.Fragment,{children:[r.jsx(le,{variant:"avatar",size:"w-18 h-18 mr-6"}),r.jsx(le,{variant:"rect",size:"w-50"})]}),l=r.jsxs(m.Fragment,{children:[r.jsx(Ve,{size:"xs",src:a==null?void 0:a.model.image,className:"mr-6"}),a==null?void 0:a.model.name]}),i=s||!a?o:l;return r.jsx(je,{...e,label:i,panel:r.jsx(Zs,{filter:t})})}function pr({filters:e,pinnedFilters:n,className:t}){const{decodedFilters:s,remove:a,replaceAll:o}=Is(e,n);return s.length?r.jsx("div",{className:D("flex items-center gap-6 overflow-x-auto",t),children:s.map((l,i)=>{const c=e.find(u=>u.key===l.key);if(!c)return null;const d=u=>{const g=[...s];g.splice(i,1,{key:c.key,value:u.value,isInactive:!1,operator:u.operator||c.defaultOperator}),o(g)};return r.jsxs("div",{children:[!l.isInactive&&r.jsx(W,{variant:"outline",color:"primary",size:"xs",radius:"rounded-l-md",onClick:()=>{a(l.key)},children:r.jsx(Vt,{})}),r.jsx(fa,{filter:c,isInactive:l.isInactive,value:l.valueKey!=null?l.valueKey:l.value,operator:l.operator,onValueChange:d})]},l.key)})}):null}const vr=V(r.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"AddOutlined"),jt=V(r.jsx("path",{d:"M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"}),"FileDownloadOutlined");function Je(e,n){const t=document.createElement("a");t.href=e,n&&(t.download=n),document.body.appendChild(t),t.click(),document.body.removeChild(t)}function ya(e){const n=ft(),[t,s]=m.useState(!e.value&&!e.defaultValue),a=e.onChange,[o,l]=J(e.value||n,e.defaultValue||n,a),{min:i,max:c,granularity:d,timezone:u,calendarIsOpen:g,setCalendarIsOpen:f,closeDialogOnSelection:h}=Kt(o,e),v=m.useCallback(()=>{s(!0),l(n),a==null||a(null),f(!1)},[n,l,a,f]),[b,y]=m.useState(()=>[pe(o)]),p=m.useCallback(S=>{i&&S.compare(i)<0?S=i:c&&S.compare(c)>0&&(S=c);const T=o?o.set(S):Z(S,u);l(T),y([pe(T)]),s(!1)},[l,i,c,o,u]),w=m.useCallback(S=>!t&&ge(o,S),[o,t]),j=m.useCallback(S=>({onClick:()=>{p==null||p(S),h&&(f==null||f(!1))}}),[p,f,h]);return{selectedValue:o,setSelectedValue:l,calendarIsOpen:g,setCalendarIsOpen:f,dayIsActive:w,dayIsHighlighted:()=>!1,dayIsRangeStart:()=>!1,dayIsRangeEnd:()=>!1,getCellProps:j,calendarDates:b,setCalendarDates:y,isPlaceholder:t,clear:v,setIsPlaceholder:s,min:i,max:c,granularity:d,timezone:u,closeDialogOnSelection:h}}function wa({showCalendarFooter:e,...n}){const t=ya(n),s=m.useRef(null),a=ft(),o=e&&r.jsx(st,{padding:"px-14 pb-14",startAction:r.jsx(ee,{disabled:t.isPlaceholder,variant:"text",color:"primary",onClick:()=>{t.clear()},children:r.jsx($,{message:"Clear"})}),children:r.jsx(ee,{variant:"text",color:"primary",onClick:()=>{t.setSelectedValue(a),t.setCalendarIsOpen(!1)},children:r.jsx($,{message:"Today"})})}),l=r.jsx(rt,{offset:8,placement:"bottom-start",isOpen:t.calendarIsOpen,onOpenChange:t.setCalendarIsOpen,type:"popover",triggerRef:s,returnFocusToTrigger:!1,moveFocusToDialog:!1,children:r.jsxs(Ae,{size:"auto",children:[r.jsx(at,{className:"flex items-start gap-40",padding:e?"px-24 pt-20 pb-10":null,children:r.jsx(qt,{state:t,visibleMonths:1})}),o]})}),i={onClick:c=>{c.stopPropagation(),c.preventDefault(),ja(c)?t.setCalendarIsOpen(!1):t.setCalendarIsOpen(!0)}};return r.jsxs(m.Fragment,{children:[r.jsx(dt,{ref:s,wrapperProps:i,endAdornment:r.jsx(Bt,{className:D(n.disabled&&"text-disabled")}),...n,children:r.jsx(xe,{segmentProps:i,state:t,value:t.selectedValue,onChange:t.setSelectedValue,isPlaceholder:t.isPlaceholder})}),l]})}function xr(e){const{min:n,max:t}=e,{trans:s}=Y(),{format:a}=ie(),{field:{onChange:o,onBlur:l,value:i=null,ref:c},fieldState:{invalid:d,error:u}}=we({name:e.name,rules:{validate:h=>{if(!h)return;const v=Ee(h);if(n&&v.compare(n)<0)return s({message:"Enter a date after :date",values:{date:a(h)}});if(t&&v.compare(t)>0)return s({message:"Enter a date before :date",values:{date:a(h)}})}}}),g=i?Ee(i):null,f={onChange:h=>{o(h&&h.toAbsoluteString())},onBlur:l,value:g,invalid:d,errorMessage:u==null?void 0:u.message,inputRef:c};return r.jsx(wa,{...ae(f,e)})}function ja(e){return["hour","minute","dayPeriod"].includes(e.currentTarget.ariaLabel||"")}const ka=fe.forwardRef((e,n)=>{const{children:t,size:s="sm",description:a,className:o,invalid:l,autoFocus:i,errorMessage:c,...d}=e,u=ze(n);Kn({autoFocus:i},u);const g=Ca(s),f=Re(e),h=m.useId();return r.jsxs("div",{className:D(o,"isolate"),children:[r.jsxs("label",{className:"flex items-center select-none",children:[r.jsx("input",{...d,type:"checkbox",role:"switch","aria-invalid":l||void 0,"aria-describedby":a?h:void 0,ref:u,"aria-checked":d.checked,className:D(g,!l&&"checked:bg-primary dark:checked:bg-primary-dark checked:border-primary dark:checked:border-primary-dark",l&&"checked:bg-danger checked:border-danger","outline-none cursor-pointer bg-chip border-chip border checked:bg-primary checked:border-primary p-0 overflow-hidden relative rounded-3xl appearance-none transition-colors flex-shrink-0 flex items-center outline-none","before:z-10 before:border before:rounded-3xl before:block before:bg-white before:transition-transform before:translate-x-2","checked:before:border-white","focus-visible:ring",e.disabled&&"opacity-80 cursor-not-allowed")}),t&&r.jsx("span",{className:D(f.size.font,"ml-12",l&&"text-danger",e.disabled&&"text-disabled"),children:t})]}),a&&!c&&r.jsx("div",{id:h,className:f.description,children:a}),c&&r.jsx("div",{id:h,className:f.error,children:c})]})});function br(e){const{field:{onChange:n,onBlur:t,value:s=!1,ref:a},fieldState:{invalid:o,error:l}}=we({name:e.name}),i={onChange:c=>{c.target.value&&c.target.value!=="on"?n(c.target.checked?c.target.value:!1):n(c)},onBlur:t,checked:!!s,invalid:o,errorMessage:l==null?void 0:l.message,name:e.name};return r.jsx(ka,{ref:a,...ae(e,i)})}function Ca(e){switch(e){case"xl":return"w-68 h-36 before:w-28 before:h-28 checked:before:translate-x-36";case"lg":return"w-56 h-30 before:w-22 before:h-22 checked:before:translate-x-30";case"md":return"w-46 h-24 before:w-18 before:h-18 checked:before:translate-x-24";case"xs":return"w-30 h-16 before:w-12 before:h-12 checked:before:translate-x-16";default:return"w-38 h-20 before:w-14 before:h-14 checked:before:translate-x-20"}}const yr=V(r.jsx("path",{d:"M16 9v10H8V9h8m-1.5-6h-5l-1 1H5v2h14V4h-3.5l-1-1zM18 7H6v12c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7z"}),"DeleteOutlined"),Q=new Map,Ie=new Map,Ia=new Map,_={status:"inactive"};function Ye({e,rect:n,deltaX:t,deltaY:s}){return{rect:n,x:e.clientX,y:e.clientY,deltaX:t??0,deltaY:s??0,nativeEvent:e}}let nn=null;function kt(e){nn=e}function Sa(e){return{left:e.left,top:e.top,width:e.width,height:e.height}}function Da(e){const n=new IntersectionObserver(t=>{t.forEach(s=>{const{width:a,height:o,left:l,top:i}=s.boundingClientRect,[c,d]=[...e].find(([,g])=>g.ref.current===s.target)||[];if(c==null||d==null)return;const u={width:a,height:o,left:l,top:i};e.set(c,{...d,rect:u})}),n.disconnect()});[...e.values()].forEach(t=>{t.ref.current&&n.observe(t.ref.current)})}function wr({id:e,disabled:n,ref:t,preview:s,hidePreview:a,...o}){const l=m.useRef(null),{addGlobalListener:i,removeAllGlobalListeners:c}=Ot(),d=m.useRef({lastPosition:{x:0,y:0}}).current,u=m.useRef(o);u.current=o,m.useLayoutEffect(()=>(n?Q.delete(e):Q.set(e,{...Q.get(e),id:e,ref:t,type:u.current.type,getData:u.current.getData}),()=>{Q.delete(e)}),[e,n,u,t]);const g=y=>{Ia.forEach(p=>{var w;p.type===((w=Q.get(e))==null?void 0:w.type)&&y(p)})},f=y=>{var T,M;const p=Q.get(e),w=t.current,j=!l.current||!d.clickedEl||l.current.contains(d.clickedEl);if(nn||!w||!p||!j){y.preventDefault(),y.stopPropagation();return}Da(Ie),kt("drag"),a&&Pa(y),y.dataTransfer.effectAllowed="move",d.lastPosition={x:y.clientX,y:y.clientY},d.currentRect=Sa(w.getBoundingClientRect());const S=Ye({rect:d.currentRect,e:y});s!=null&&s.current&&s.current(p,x=>{y.dataTransfer.setDragImage(x,0,0)}),_.status="dragging",_.dragTargetId=e,t.current&&(t.current.dataset.dragging="true"),(M=(T=u.current).onDragStart)==null||M.call(T,S,p),requestAnimationFrame(()=>{g(x=>{var E;return(E=x.onDragStart)==null?void 0:E.call(x,S,p)})}),i(window,"dragover",h,!0)},h=y=>{var M,x;if(y.preventDefault(),!d.currentRect)return;const p=y.clientX-d.lastPosition.x,w=y.clientY-d.lastPosition.y,j={...d.currentRect,left:d.currentRect.left+p,top:d.currentRect.top+w},S=Ye({rect:j,e:y,deltaX:p,deltaY:w}),T=Q.get(e);T&&((x=(M=u.current).onDragMove)==null||x.call(M,S,T),g(E=>{var N;return(N=E.onDragMove)==null?void 0:N.call(E,S,T)})),d.lastPosition={x:y.clientX,y:y.clientY},d.currentRect=j};return{draggableProps:{draggable:!n,onDragStart:f,onDragEnd:y=>{var j,S;if(c(),!d.currentRect)return;kt(null),oe&&oe.remove();const p=Ye({rect:d.currentRect,e:y}),w=Q.get(e);w&&((S=(j=u.current).onDragEnd)==null||S.call(j,p,w),g(T=>{var M;return(M=T.onDragEnd)==null?void 0:M.call(T,p,w,_.status)})),requestAnimationFrame(()=>{_.dragTargetId=void 0,_.status="inactive",t.current&&delete t.current.dataset.dragging})},onPointerDown:y=>{d.clickedEl=y.target}},dragHandleRef:l}}let oe;function Pa(e){oe||(oe=new Image,document.body.append(oe),oe.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="),e.dataTransfer.setDragImage(oe,0,0)}async function*Ea(e){for(const n of e.items)if(n.kind==="file")if(typeof n.webkitGetAsEntry=="function"){const t=n.webkitGetAsEntry();if(!t)continue;if(t.isFile){if(t.name===".DS_Store")continue;yield new Xe(n.getAsFile(),t.fullPath)}else t.isDirectory&&(yield*sn(t))}else{const t=n.getAsFile();if(!t||t.name===".DS_Store")continue;yield new Xe(t,n.fullPath)}}async function*sn(e){const n=e.createReader();let t;do{t=await new Promise((s,a)=>{n.readEntries(s,a)});for(const s of t)if(s.isFile){if(s.name===".DS_Store")continue;const a=await Ta(s);yield new Xe(a,s.fullPath)}else s.isDirectory&&(yield*sn(s))}while(t.length>0)}function Ta(e){return new Promise((n,t)=>e.file(n,t))}async function Ma(e){const n=[];for await(const t of e)n.push(t);return n}const Na=400;function jr({id:e,disabled:n,ref:t,...s}){const a=m.useRef({dragOverElements:new Set,dropActivateTimer:void 0}).current,o=m.useRef(s);o.current=s,m.useLayoutEffect(()=>(Ie.set(e,{...Ie.get(e),disabled:n,id:e,ref:t}),()=>{Ie.delete(e)}),[e,o,n,t]);const l=f=>{var b;const h=o.current,v=h.allowDragEventsFromItself||t.current!==((b=f.ref)==null?void 0:b.current);return!!(f!=null&&f.type&&v&&h.types.includes(f.type)&&(!h.acceptsDrop||h.acceptsDrop(f)))},i=f=>{var v,b;const h=he(f);h&&((b=(v=o.current).onDragLeave)==null||b.call(v,h))};return{droppableProps:n?{}:{onDragOver:f=>{var v,b;f.preventDefault(),f.stopPropagation();const h=he(f);h&&l(h)&&((b=(v=o.current).onDragOver)==null||b.call(v,h,f))},onDragEnter:f=>{var v,b;if(f.stopPropagation(),a.dragOverElements.add(f.target),a.dragOverElements.size>1)return;const h=he(f);h&&l(h)&&((b=(v=o.current).onDragEnter)==null||b.call(v,h),clearTimeout(a.dropActivateTimer),typeof o.current.onDropActivate=="function"&&(a.dropActivateTimer=setTimeout(()=>{var y,p;h&&((p=(y=o.current).onDropActivate)==null||p.call(y,h))},Na)))},onDragLeave:f=>{f.stopPropagation(),a.dragOverElements.delete(f.target);for(const v of a.dragOverElements)f.currentTarget.contains(v)||a.dragOverElements.delete(v);if(a.dragOverElements.size>0)return;const h=he(f);h&&l(h)&&(i(f),clearTimeout(a.dropActivateTimer))},onDrop:async f=>{var v,b,y,p;f.preventDefault(),f.stopPropagation(),a.dragOverElements.clear(),i(f),clearTimeout(a.dropActivateTimer);const h=he(f);if(h)if((b=(v=o.current).onDragLeave)==null||b.call(v,h),!l(h))_.status!=="inactive"&&(_.status="dropFail");else{const w=(p=(y=o.current).onDrop)==null?void 0:p.call(y,h);_.status!=="inactive"&&(_.status=w===!1?"dropFail":"dropSuccess")}}}}}function he(e){if(_.dragTargetId!=null)return Q.get(_.dragTargetId);if(e.dataTransfer.types.includes("Files"))return{type:"nativeFile",el:null,ref:null,getData:()=>Ma(Ea(e.dataTransfer))}}const Ra="user",kr=V(r.jsx("path",{d:"M17 7h-4v2h4c1.65 0 3 1.35 3 3s-1.35 3-3 3h-4v2h4c2.76 0 5-2.24 5-5s-2.24-5-5-5zm-6 8H7c-1.65 0-3-1.35-3-3s1.35-3 3-3h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-2zm-3-4h8v2H8z"}),"LinkOutlined"),Cr=V(r.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertOutlined");/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Me(){return Me=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Me.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ne(){return Ne=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Ne.apply(this,arguments)}/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function de(e,n,t){var s,a=(s=t.initialDeps)!=null?s:[],o;return function(){var l;t.key&&t.debug!=null&&t.debug()&&(l=Date.now());var i=e(),c=i.length!==a.length||i.some(function(v,b){return a[b]!==v});if(!c)return o;a=i;var d;if(t.key&&t.debug!=null&&t.debug()&&(d=Date.now()),o=n.apply(void 0,i),t.key&&t.debug!=null&&t.debug()){var u=Math.round((Date.now()-l)*100)/100,g=Math.round((Date.now()-d)*100)/100,f=g/16,h=function(b,y){for(b=String(b);b.length<y;)b=" "+b;return b};console.info("%c⏱ "+h(g,5)+" /"+h(u,5)+" ms",`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(`+Math.max(0,Math.min(120-120*f,120))+"deg 100% 31%);",t==null?void 0:t.key)}return t==null||t.onChange==null||t.onChange(o),o}}function Ce(e,n){if(e===void 0)throw new Error("Unexpected undefined"+(n?": "+n:""));return e}var za=function(n,t){return Math.abs(n-t)<1};/**
 * virtual-core
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var $a=function(n){return n},Oa=function(n){for(var t=Math.max(n.startIndex-n.overscan,0),s=Math.min(n.endIndex+n.overscan,n.count-1),a=[],o=t;o<=s;o++)a.push(o);return a},Aa=function(n,t){var s=n.scrollElement;if(s){var a=function(i){var c=i.width,d=i.height;t({width:Math.round(c),height:Math.round(d)})};a(s.getBoundingClientRect());var o=new ResizeObserver(function(l){var i=l[0];if(i!=null&&i.borderBoxSize){var c=i.borderBoxSize[0];if(c){a({width:c.inlineSize,height:c.blockSize});return}}a(s.getBoundingClientRect())});return o.observe(s,{box:"border-box"}),function(){o.unobserve(s)}}},Fa=function(n,t){var s=n.scrollElement;if(s){var a=function(){t(s[n.options.horizontal?"scrollLeft":"scrollTop"])};return a(),s.addEventListener("scroll",a,{passive:!0}),function(){s.removeEventListener("scroll",a)}}},La=function(n,t,s){if(t!=null&&t.borderBoxSize){var a=t.borderBoxSize[0];if(a){var o=Math.round(a[s.options.horizontal?"inlineSize":"blockSize"]);return o}}return Math.round(n.getBoundingClientRect()[s.options.horizontal?"width":"height"])},Va=function(n,t,s){var a,o,l=t.adjustments,i=l===void 0?0:l,c=t.behavior,d=n+i;(a=s.scrollElement)==null||a.scrollTo==null||a.scrollTo((o={},o[s.options.horizontal?"left":"top"]=d,o.behavior=c,o))},Ha=function(n){var t=this;this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.isScrollingTimeoutId=null,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=function(){var s=null,a=function(){return s||(typeof ResizeObserver<"u"?s=new ResizeObserver(function(l){l.forEach(function(i){t._measureElement(i.target,i)})}):null)};return{disconnect:function(){var l;return(l=a())==null?void 0:l.disconnect()},observe:function(l){var i;return(i=a())==null?void 0:i.observe(l,{box:"border-box"})},unobserve:function(l){var i;return(i=a())==null?void 0:i.unobserve(l)}}}(),this.range={startIndex:0,endIndex:0},this.setOptions=function(s){Object.entries(s).forEach(function(a){var o=a[0],l=a[1];typeof l>"u"&&delete s[o]}),t.options=Ne({debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:$a,rangeExtractor:Oa,onChange:function(){},measureElement:La,initialRect:{width:0,height:0},scrollMargin:0,scrollingDelay:150,indexAttribute:"data-index",elementKeyAttribute:"data-element-key",initialMeasurementsCache:[],lanes:1},s)},this.notify=function(){t.options.onChange==null||t.options.onChange(t)},this.cleanup=function(){t.unsubs.filter(Boolean).forEach(function(s){return s()}),t.unsubs=[],t.scrollElement=null},this._didMount=function(){return t.measureElementCache.forEach(t.observer.observe),function(){t.observer.disconnect(),t.cleanup()}},this._willUpdate=function(){var s=t.options.getScrollElement();t.scrollElement!==s&&(t.cleanup(),t.scrollElement=s,t._scrollToOffset(t.scrollOffset,{adjustments:void 0,behavior:void 0}),t.unsubs.push(t.options.observeElementRect(t,function(a){var o=t.scrollRect;t.scrollRect=a,(t.options.horizontal?a.width!==o.width:a.height!==o.height)&&t.maybeNotify()})),t.unsubs.push(t.options.observeElementOffset(t,function(a){t.scrollAdjustments=0,t.scrollOffset!==a&&(t.isScrollingTimeoutId!==null&&(clearTimeout(t.isScrollingTimeoutId),t.isScrollingTimeoutId=null),t.isScrolling=!0,t.scrollDirection=t.scrollOffset<a?"forward":"backward",t.scrollOffset=a,t.maybeNotify(),t.isScrollingTimeoutId=setTimeout(function(){t.isScrollingTimeoutId=null,t.isScrolling=!1,t.scrollDirection=null,t.maybeNotify()},t.options.scrollingDelay))})))},this.getSize=function(){return t.scrollRect[t.options.horizontal?"width":"height"]},this.memoOptions=de(function(){return[t.options.count,t.options.paddingStart,t.options.scrollMargin,t.options.getItemKey]},function(s,a,o,l){return t.pendingMeasuredCacheIndexes=[],{count:s,paddingStart:a,scrollMargin:o,getItemKey:l}},{key:!1}),this.getFurthestMeasurement=function(s,a){for(var o=new Map,l=new Map,i=a-1;i>=0;i--){var c=s[i];if(!o.has(c.lane)){var d=l.get(c.lane);if(d==null||c.end>d.end?l.set(c.lane,c):c.end<d.end&&o.set(c.lane,!0),o.size===t.options.lanes)break}}return l.size===t.options.lanes?Array.from(l.values()).sort(function(u,g){return u.end-g.end})[0]:void 0},this.getMeasurements=de(function(){return[t.memoOptions(),t.itemSizeCache]},function(s,a){var o=s.count,l=s.paddingStart,i=s.scrollMargin,c=s.getItemKey,d=t.pendingMeasuredCacheIndexes.length>0?Math.min.apply(Math,t.pendingMeasuredCacheIndexes):0;t.pendingMeasuredCacheIndexes=[];for(var u=t.measurementsCache.slice(0,d),g=d;g<o;g++){var f=c(g),h=t.options.lanes===1?u[g-1]:t.getFurthestMeasurement(u,g),v=h?h.end:l+i,b=a.get(f),y=typeof b=="number"?b:t.options.estimateSize(g),p=v+y,w=h?h.lane:g%t.options.lanes;u[g]={index:g,start:v,size:y,end:p,key:f,lane:w}}return t.measurementsCache=u,u},{key:!1,debug:function(){return t.options.debug}}),this.calculateRange=de(function(){return[t.getMeasurements(),t.getSize(),t.scrollOffset]},function(s,a,o){return t.range=Ba({measurements:s,outerSize:a,scrollOffset:o})},{key:!1,debug:function(){return t.options.debug}}),this.maybeNotify=de(function(){var s=t.calculateRange();return[s.startIndex,s.endIndex,t.isScrolling]},function(){t.notify()},{key:!1,debug:function(){return t.options.debug},initialDeps:[this.range.startIndex,this.range.endIndex,this.isScrolling]}),this.getIndexes=de(function(){return[t.options.rangeExtractor,t.calculateRange(),t.options.overscan,t.options.count]},function(s,a,o,l){return s(Ne({},a,{overscan:o,count:l}))},{key:!1,debug:function(){return t.options.debug}}),this.indexFromElement=function(s){var a=t.options.indexAttribute,o=s.getAttribute(a);return o?parseInt(o,10):(console.warn("Missing attribute name '"+a+"={index}' on measured element."),-1)},this._measureElement=function(s,a){var o,l=t.indexFromElement(s),i=Ce(t.measurementsCache[l]),c=(o=s.getAttribute(t.options.elementKeyAttribute))!=null?o:i.key,d=t.measureElementCache.get(c);if(!s.isConnected){t.observer.unobserve(s),s===d&&t.measureElementCache.delete(c);return}d!==s&&(d&&t.observer.unobserve(d),t.observer.observe(s),t.measureElementCache.set(c,s));var u=t.options.measureElement(s,a,t);t.resizeItem(l,u)},this.resizeItem=function(s,a){var o,l=t.measurementsCache[s];if(l){var i=(o=t.itemSizeCache.get(l.key))!=null?o:l.size,c=a-i;c!==0&&(l.start<t.scrollOffset&&t._scrollToOffset(t.scrollOffset,{adjustments:t.scrollAdjustments+=c,behavior:void 0}),t.pendingMeasuredCacheIndexes.push(s),t.itemSizeCache=new Map(t.itemSizeCache.set(l.key,a)),t.notify())}},this.measureElement=function(s){s&&t._measureElement(s,void 0)},this.getVirtualItems=de(function(){return[t.getIndexes(),t.getMeasurements()]},function(s,a){for(var o=[],l=0,i=s.length;l<i;l++){var c=s[l],d=a[c];o.push(d)}return o},{key:!1,debug:function(){return t.options.debug}}),this.getVirtualItemForOffset=function(s){var a=t.getMeasurements();return Ce(a[an(0,a.length-1,function(o){return Ce(a[o]).start},s)])},this.getOffsetForAlignment=function(s,a){var o=t.getSize();a==="auto"&&(s<=t.scrollOffset?a="start":s>=t.scrollOffset+o?a="end":a="start"),a==="start"?s=s:a==="end"?s=s-o:a==="center"&&(s=s-o/2);var l=t.options.horizontal?"scrollWidth":"scrollHeight",i=t.scrollElement?"document"in t.scrollElement?t.scrollElement.document.documentElement[l]:t.scrollElement[l]:0,c=i-t.getSize();return Math.max(Math.min(c,s),0)},this.getOffsetForIndex=function(s,a){a===void 0&&(a="auto"),s=Math.max(0,Math.min(s,t.options.count-1));var o=Ce(t.getMeasurements()[s]);if(a==="auto")if(o.end>=t.scrollOffset+t.getSize()-t.options.scrollPaddingEnd)a="end";else if(o.start<=t.scrollOffset+t.options.scrollPaddingStart)a="start";else return[t.scrollOffset,a];var l=a==="end"?o.end+t.options.scrollPaddingEnd:o.start-t.options.scrollPaddingStart;return[t.getOffsetForAlignment(l,a),a]},this.isDynamicMode=function(){return t.measureElementCache.size>0},this.cancelScrollToIndex=function(){t.scrollToIndexTimeoutId!==null&&(clearTimeout(t.scrollToIndexTimeoutId),t.scrollToIndexTimeoutId=null)},this.scrollToOffset=function(s,a){var o=a===void 0?{}:a,l=o.align,i=l===void 0?"start":l,c=o.behavior;t.cancelScrollToIndex(),c==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.getOffsetForAlignment(s,i),{adjustments:void 0,behavior:c})},this.scrollToIndex=function(s,a){var o=a===void 0?{}:a,l=o.align,i=l===void 0?"auto":l,c=o.behavior;s=Math.max(0,Math.min(s,t.options.count-1)),t.cancelScrollToIndex(),c==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");var d=t.getOffsetForIndex(s,i),u=d[0],g=d[1];t._scrollToOffset(u,{adjustments:void 0,behavior:c}),c!=="smooth"&&t.isDynamicMode()&&(t.scrollToIndexTimeoutId=setTimeout(function(){t.scrollToIndexTimeoutId=null;var f=t.measureElementCache.has(t.options.getItemKey(s));if(f){var h=t.getOffsetForIndex(s,g),v=h[0];za(v,t.scrollOffset)||t.scrollToIndex(s,{align:g,behavior:c})}else t.scrollToIndex(s,{align:g,behavior:c})}))},this.scrollBy=function(s,a){var o=a===void 0?{}:a,l=o.behavior;t.cancelScrollToIndex(),l==="smooth"&&t.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),t._scrollToOffset(t.scrollOffset+s,{adjustments:void 0,behavior:l})},this.getTotalSize=function(){var s;return(((s=t.getMeasurements()[t.options.count-1])==null?void 0:s.end)||t.options.paddingStart)-t.options.scrollMargin+t.options.paddingEnd},this._scrollToOffset=function(s,a){var o=a.adjustments,l=a.behavior;t.options.scrollToFn(s,{behavior:l,adjustments:o},t)},this.measure=function(){t.itemSizeCache=new Map,t.notify()},this.setOptions(n),this.scrollRect=this.options.initialRect,this.scrollOffset=this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(function(s){t.itemSizeCache.set(s.key,s.size)}),this.maybeNotify()},an=function(n,t,s,a){for(;n<=t;){var o=(n+t)/2|0,l=s(o);if(l<a)n=o+1;else if(l>a)t=o-1;else return o}return n>0?n-1:0};function Ba(e){for(var n=e.measurements,t=e.outerSize,s=e.scrollOffset,a=n.length-1,o=function(d){return n[d].start},l=an(0,a,o,s),i=l;i<a&&n[i].end<s+t;)i++;return{startIndex:l,endIndex:i}}/**
 * react-virtual
 *
 * Copyright (c) TanStack
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ua=typeof document<"u"?m.useLayoutEffect:m.useEffect;function Ka(e){var n=m.useReducer(function(){return{}},{})[1],t=Me({},e,{onChange:function(l){n(),e.onChange==null||e.onChange(l)}}),s=m.useState(function(){return new Ha(t)}),a=s[0];return a.setOptions(t),m.useEffect(function(){return a._didMount()},[]),Ua(function(){return a._willUpdate()}),a}function Ir(e){return Ka(Me({observeElementRect:Aa,observeElementOffset:Fa,scrollToFn:Va},e))}const _a=fe.createContext(null);function ne(e,n){const{base_url:t}=Nt(),s=m.useContext(_a);return m.useMemo(()=>{if(!e)return{};let a;e.url&&(a=_n(e.url)?e.url:`${t}/${e.url}`);const o={previewUrl:a,downloadUrl:`${t}/api/v1/file-entries/download/${(n==null?void 0:n.downloadHashes)||e.hash}`};return s&&(o.previewUrl&&(o.previewUrl=Ct(o.previewUrl,{...s,thumbnail:n!=null&&n.thumbnail?"true":""},t)),o.downloadUrl=Ct(o.downloadUrl,s,t)),o},[t,e,n==null?void 0:n.downloadHashes,n==null?void 0:n.thumbnail,s])}function Ct(e,n,t){const s=new URL(e,t);return Object.entries(n).forEach(([a,o])=>{s.searchParams.append(a,o)}),s.toString()}const mt=fe.createContext(null);function te({message:e,className:n,allowDownload:t}){const{entries:s,activeIndex:a}=m.useContext(mt),o=s[a],l=e||r.jsx($,{message:"No file preview available"}),{downloadUrl:i}=ne(o);return r.jsxs("div",{className:D(n,"shadow bg-paper max-w-400 w-[calc(100%-40px)] text-center p-40 rounded"),children:[r.jsx("div",{className:"text-lg",children:l}),t&&r.jsx("div",{className:"block mt-20 text-center",children:r.jsx(ee,{variant:"flat",color:"primary",onClick:()=>{i&&Je(i)},children:r.jsx($,{message:"Download"})})})]})}function Wa(e){const{entry:n,className:t}=e,{trans:s}=Y(),{previewUrl:a}=ne(n);return a?r.jsx("img",{className:D(t,"shadow"),src:a,alt:s({message:"Preview for :name",values:{name:n.name}})}):r.jsx(te,{...e})}const Ya=5242880;function qa(e){const{entry:n,className:t}=e,{trans:s}=Y(),[a,o]=m.useState(!1),[l,i]=m.useState(!0),[c,d]=m.useState(!1),[u,g]=m.useState(null),{previewUrl:f}=ne(n);return m.useEffect(()=>{n&&(f?n.file_size>=Ya?(o(!0),i(!1)):Ga(f).then(h=>{g(h.data)}).catch(()=>{d(!0)}).finally(()=>{i(!1)}):d(!0))},[n,f]),l?r.jsx(lt,{isIndeterminate:!0,"aria-label":s({message:"Loading file contents"})}):a?r.jsx(te,{...e,message:r.jsx($,{message:"This file is too large to preview."})}):c?r.jsx(te,{...e,message:r.jsx($,{message:"There was an issue previewing this file"})}):r.jsx("pre",{className:D("rounded bg-paper p-20 text-sm whitespace-pre-wrap break-words h-full overflow-y-auto w-full",t),children:r.jsx("div",{className:"container mx-auto",children:`${u}`})})}function Ga(e){return Le.get(e,{responseType:"text",withCredentials:!1,headers:{Accept:"text/plain"}})}function Xa(e){const{entry:n,className:t}=e,{previewUrl:s}=ne(n),a=m.useRef(null),[o,l]=m.useState(!1);return m.useEffect(()=>{var i;l(!((i=a.current)!=null&&i.canPlayType(n.mime)))},[n]),o||!s?r.jsx(te,{...e}):r.jsx("video",{className:t,ref:a,controls:!0,controlsList:"nodownload noremoteplayback",playsInline:!0,autoPlay:!0,children:r.jsx("source",{src:s,type:n.mime,onError:()=>{l(!0)}})})}function Qa(e){const{entry:n,className:t}=e,{previewUrl:s}=ne(n),a=m.useRef(null),[o,l]=m.useState(!1);return m.useEffect(()=>{var i;l(!((i=a.current)!=null&&i.canPlayType(n.mime)))},[n]),o||!s?r.jsx(te,{...e}):r.jsx("audio",{className:t,ref:a,controls:!0,controlsList:"nodownload noremoteplayback",autoPlay:!0,children:r.jsx("source",{src:s,type:n.mime,onError:()=>{l(!0)}})})}function Za(e){const{entry:n,className:t}=e,{trans:s}=Y(),{previewUrl:a}=ne(n);return a?r.jsx("iframe",{title:s({message:"Preview for :name",values:{name:n.name}}),className:D(t,"w-full h-full"),src:`${a}#toolbar=0`}):r.jsx(te,{...e})}function qe(e){const{entry:n,className:t}=e,{trans:s}=Y(),a=m.useRef(null),[o,l]=m.useState(!1),i=m.useRef(),[c,d]=m.useState(!1),{previewUrl:u}=ne(n);return m.useEffect(()=>{u?n.file_size&&n.file_size>25e6?l(!0):a.current&&(a.current.onload=()=>{clearTimeout(i.current),d(!1)},Ja(u,n).then(g=>{a.current&&(a.current.src=g)}),i.current=setTimeout(()=>{l(!0)},5e3)):l(!0)},[n,u]),o?r.jsx(te,{...e}):r.jsxs("div",{className:D(t,"w-full h-full"),children:[c&&r.jsx(lt,{}),r.jsx("iframe",{ref:a,title:s({message:"Preview for :name",values:{name:n.name}}),className:D("w-full h-full",c&&"hidden")})]})}async function Ja(e,n){const t=new URL(e);if(!t.searchParams.has("shareable_link")){const{data:s}=await Le.post(`file-entries/${n.id}/add-preview-token`);t.searchParams.append("preview_token",s.preview_token)}return er(t)}function er(e){return`https://view.officeapps.live.com/op/embed.aspx?src=${encodeURIComponent(e.toString())}`}const It={text:qa,video:Xa,audio:Qa,image:Wa,pdf:Za,spreadsheet:qe,powerPoint:qe,word:qe,"text/rtf":te};function tr(e){const n=e==null?void 0:e.mime,t=e==null?void 0:e.type;return It[n]||It[t]||te}const nr=V(r.jsx("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12l4.58-4.59z"}),"ChevronLeftOutlined"),sr=2*1024*1024;function ar({file:e,className:n,iconClassName:t,showImage:s=!0}){const{trans:a}=Y(),{previewUrl:o}=ne(e,{thumbnail:!0});if(e.file_size&&e.file_size>sr&&!e.thumbnail&&(s=!1),s&&e.type==="image"&&o){const l=a({message:":fileName thumbnail",values:{fileName:e.name}});return r.jsx("img",{className:D(n,"object-cover"),src:o,alt:l,draggable:!1})}return r.jsx(Wn,{className:t,type:e.type})}function rr({entries:e,onClose:n,showHeader:t=!0,className:s,headerActionsLeft:a,allowDownload:o=!0,...l}){const i=et("(max-width: 1024px)"),[c,d]=J(l.activeIndex,l.defaultActiveIndex||0,l.onActiveIndexChange),u=e[c],g=m.useMemo(()=>({entries:e,activeIndex:c}),[e,c]),f=tr(u);if(!u)return n==null||n(),null;const h=e.length-1>c,v=()=>{d(c+1)},b=c>0,y=()=>{d(c-1)};return r.jsxs(mt.Provider,{value:g,children:[t&&r.jsx(or,{actionsLeft:a,isMobile:i,onClose:n,onNext:h?v:void 0,onPrevious:b?y:void 0,allowDownload:o}),r.jsxs("div",{className:D("overflow-hidden relative flex-auto",s),children:[i&&r.jsx(W,{size:"lg",className:"text-muted absolute left-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!b,onClick:y,children:r.jsx(Wt,{})}),r.jsx(be,{initial:!1,children:r.jsx(ce.div,{className:"absolute inset-0 flex items-center justify-center",...ot,children:r.jsx(f,{className:"max-h-[calc(100%-30px)]",entry:u,allowDownload:o})},u.id)}),i&&r.jsx(W,{size:"lg",className:"text-muted absolute right-0 top-1/2 transform -translate-y-1/2 z-10",disabled:!h,onClick:v,children:r.jsx(Yt,{})})]})]})}function or({onNext:e,onPrevious:n,onClose:t,isMobile:s,actionsLeft:a,allowDownload:o}){const{entries:l,activeIndex:i}=m.useContext(mt),c=l[i],{downloadUrl:d}=ne(c),f=s?r.jsx(W,{onClick:()=>{d&&Je(d)},children:r.jsx(jt,{})}):r.jsx(ee,{startIcon:r.jsx(jt,{}),variant:"text",onClick:()=>{d&&Je(d)},children:r.jsx($,{message:"Download"})});return r.jsxs("div",{className:"flex items-center justify-between gap-20 bg-paper border-b flex-shrink-0 text-sm min-h-50 px-10 text-muted",children:[r.jsxs("div",{className:"flex items-center gap-4 w-1/3 justify-start",children:[a,o?f:void 0]}),r.jsxs("div",{className:"flex items-center gap-10 w-1/3 justify-center flex-nowrap text-main",children:[r.jsx(ar,{file:c,iconClassName:"w-16 h-16",showImage:!1}),r.jsx("div",{className:"whitespace-nowrap overflow-hidden overflow-ellipsis",children:c.name})]}),r.jsxs("div",{className:"w-1/3 flex items-center gap-10 justify-end whitespace-nowrap",children:[!s&&r.jsxs(m.Fragment,{children:[r.jsx(W,{disabled:!n,onClick:n,children:r.jsx(nr,{})}),r.jsx("div",{children:i+1}),r.jsx("div",{children:"/"}),r.jsx("div",{children:l.length}),r.jsx(W,{disabled:!e,onClick:e,children:r.jsx(qn,{})}),r.jsx("div",{className:"bg-divider w-1 h-24 mx-20"})]}),r.jsx(W,{radius:"rounded-none",onClick:t,children:r.jsx(Vt,{})})]})]})}function Sr(e){return r.jsx(Ae,{size:"fullscreenTakeover",background:"bg-alt",className:"flex flex-col",children:r.jsx(lr,{...e})})}function lr(e){const{close:n}=nt();return r.jsx(rr,{onClose:n,...e})}const ir={key:"type",label:I("Type"),description:I("Type of the file"),defaultOperator:ve.eq,control:{type:H.Select,defaultValue:"05",options:[{key:"02",label:I("Text"),value:"text"},{key:"03",label:I("Audio"),value:"audio"},{key:"04",label:I("Video"),value:"video"},{key:"05",label:I("Image"),value:"image"},{key:"06",label:I("PDF"),value:"pdf"},{key:"07",label:I("Spreadsheet"),value:"spreadsheet"},{key:"08",label:I("Word Document"),value:"word"},{key:"09",label:I("Photoshop"),value:"photoshop"},{key:"10",label:I("Archive"),value:"archive"},{key:"11",label:I("Folder"),value:"folder"}]}},Dr=[ir,{key:"public",label:I("Visibility"),description:I("Whether file is publicly accessible"),defaultOperator:ve.eq,control:{type:H.Select,defaultValue:"01",options:[{key:"01",label:I("Private"),value:!1},{key:"02",label:I("Public"),value:!0}]}},bs({description:I("Date file was uploaded")}),ys({description:I("Date file was last changed")}),{key:"owner_id",label:I("Uploader"),description:I("User that this file was uploaded by"),defaultOperator:ve.eq,control:{type:H.SelectModel,model:Ra}}],Pr=V(r.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"}),"ArrowBackOutlined"),Er=V(r.jsx("path",{d:"M12 5.83 15.17 9l1.41-1.41L12 3 7.41 7.59 8.83 9 12 5.83zm0 12.34L8.83 15l-1.41 1.41L12 21l4.59-4.59L15.17 15 12 18.17z"}),"UnfoldMoreOutlined");export{ct as $,Ve as A,We as B,la as C,dr as D,Ir as E,ve as F,Ks as G,Dr as H,Js as I,Sr as J,Wt as K,kr as L,Cr as M,Zs as N,Qt as O,Qs as P,Er as Q,Pr as R,Hs as S,gr as T,Ra as U,ne as V,ar as W,G as X,rr as Y,_a as Z,ir as _,hr as a,nn as a0,Ts as a1,Te as a2,Ia as a3,da as a4,Gt as a5,Bt as a6,es as a7,fs as a8,ut as a9,As as aa,_t as ab,nr as ac,Qn as ad,mr as b,fr as c,H as d,bs as e,Yt as f,Is as g,Bs as h,pr as i,vr as j,Je as k,jt as l,xr as m,br as n,ea as o,Es as p,ka as q,oa as r,wr as s,jr as t,ys as u,Da as v,Ie as w,yr as x,ra as y,ft as z};
//# sourceMappingURL=UnfoldMore-d41935b6.js.map
